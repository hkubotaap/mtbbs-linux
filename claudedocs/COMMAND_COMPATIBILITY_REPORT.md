# MTBBS ã‚³ãƒãƒ³ãƒ‰äº’æ›æ€§æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ

**ä½œæˆæ—¥**: 2025å¹´12æœˆ25æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **:
- MTBBS 3.02 (Delphi/Pascalå®Ÿè£…)
- MTBBS Linux (Python/AsyncIOå®Ÿè£…)

---

## ç¬¬1éƒ¨: ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### æ¤œè¨¼ã®ç›®çš„ã¨ç¯„å›²

æœ¬ãƒ¬ãƒãƒ¼ãƒˆã¯ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®MTBBS 3.02ï¼ˆDelphi/Pascalå®Ÿè£…ï¼‰ã¨æ–°è¦Pythonå®Ÿè£…ï¼ˆmtbbs-linuxï¼‰é–“ã®ã‚³ãƒãƒ³ãƒ‰ä½“ç³»ãŠã‚ˆã³ã‚³ãƒãƒ³ãƒ‰é·ç§»ãƒ­ã‚¸ãƒƒã‚¯ã®äº’æ›æ€§ã‚’æ¤œè¨¼ã—ã€å®Ÿè£…ã‚®ãƒ£ãƒƒãƒ—ã‚’ç‰¹å®šã—ã¦ä»Šå¾Œã®é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’æç¤ºã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

**æ¤œè¨¼å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**:
- **ã‚ªãƒªã‚¸ãƒŠãƒ«**: `C:\Users\creli\Desktop\MTBBS_source\mtbbs302`
- **Pythonç‰ˆ**: `C:\Users\creli\Desktop\MTBBS_source\mtbbs-linux`

**æ¤œè¨¼é …ç›®**:
1. ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒãƒ³ãƒ‰ã®å­˜åœ¨ã¨æ©Ÿèƒ½ã®ä¸€è‡´
2. ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ ã¨ã‚³ãƒãƒ³ãƒ‰é·ç§»ãƒ‘ã‚¹
3. æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®æ•´åˆæ€§
4. é€£ç¶šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®æ¯”è¼ƒ

### ä¸»è¦ãªç™ºè¦‹äº‹é …

#### ğŸ¯ äº’æ›æ€§ã‚¹ã‚³ã‚¢: **31%** (8/26ã‚³ãƒãƒ³ãƒ‰å®Œå…¨å®Ÿè£…)

**åˆ†é¡**:
- âœ… **å®Œå…¨äº’æ›**: 9ã‚³ãƒãƒ³ãƒ‰ (N, R, E, H, U, Y, _, #, Q)
- âš ï¸ **éƒ¨åˆ†äº’æ›**: 3ã‚³ãƒãƒ³ãƒ‰ (W, C, G) - åŸºæœ¬æ©Ÿèƒ½ã®ã¿å®Ÿè£…
- âŒ **æœªå®Ÿè£…**: 14ã‚³ãƒãƒ³ãƒ‰ (M, A, K, I, L, O, S, T, X, P, @, F, %, !)

#### ğŸ”‘ ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªå·®ç•°

1. **ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (M)**: å®Œå…¨æœªå®Ÿè£… - ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“é€šä¿¡ã®åŸºå¹¹æ©Ÿèƒ½ãŒæ¬ å¦‚
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² (A)**: å®Œå…¨æœªå®Ÿè£… - æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªå·±ç™»éŒ²ãŒä¸å¯
3. **SYSOPæ©Ÿèƒ½ (@)**: å®Œå…¨æœªå®Ÿè£… - ç®¡ç†è€…æ“ä½œãŒã§ããªã„
4. **ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ (F)**: å®Œå…¨æœªå®Ÿè£… - ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰æ©Ÿèƒ½ãªã—
5. **ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ **: Delphiç‰ˆã®éšå±¤çš„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒPythonç‰ˆã§ã¯ç°¡ç•¥åŒ–

#### ğŸ’¡ ãƒã‚¸ãƒ†ã‚£ãƒ–ãªäº’æ›æ€§

1. **ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†**: ä¸¡å®Ÿè£…ã§åŒç­‰ã®ä»•çµ„ã¿ï¼ˆ`command_line`å¤‰æ•°ï¼‰
2. **é€£ç¶šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ**: `n@`, `r0@`, `e1`ãªã©ãŒå®Œå…¨äº’æ›
3. **æ²ç¤ºæ¿ã‚·ã‚¹ãƒ†ãƒ **: èª­ã¿æ›¸ãæ¨©é™ç®¡ç†ã‚’å«ã‚€åŸºæœ¬æ©Ÿèƒ½ã¯å®Ÿè£…æ¸ˆã¿
4. **ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**: ç°¡ç•¥ç‰ˆã ãŒåŸºæœ¬çš„ãªãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã¯å®Ÿç¾
5. **ãƒ‹ãƒ¥ãƒ¼ã‚¹æ©Ÿèƒ½**: æ–°ç€è‡ªå‹•è¡¨ç¤ºã¨ã‚ªãƒ¼ãƒˆãƒªãƒ¼ãƒ‰æ©Ÿèƒ½ãŒå®Œå…¨äº’æ›

### äº’æ›æ€§ãƒªã‚¹ã‚¯è©•ä¾¡

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | é‡è¦åº¦ | å¯¾ç­–å„ªå…ˆåº¦ |
|-------|------|--------|----------|
| ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ æœªå®Ÿè£… | é«˜ | ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“é€šä¿¡ä¸å¯ | **æœ€å„ªå…ˆ** |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æœªå®Ÿè£… | é«˜ | æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç²å¾—ä¸å¯ | **æœ€å„ªå…ˆ** |
| SYSOPæ©Ÿèƒ½æœªå®Ÿè£… | é«˜ | ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ä¸å¯ | **æœ€å„ªå…ˆ** |
| ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç°¡ç•¥åŒ– | ä¸­ | æ“ä½œæ€§ä½ä¸‹ | é«˜ |
| Whoæ©Ÿèƒ½åˆ¶é™ | ä¸­ | ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ„Ÿã®ä½ä¸‹ | ä¸­ |
| ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½æœªå®Ÿè£… | ä¸­ | ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ä¸å¯ | ä¸­ |
| é›»å ±ã‚·ã‚¹ãƒ†ãƒ æœªå®Ÿè£… | ä½ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ãªã— | ä½ |
| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æœªå®Ÿè£… | ä½ | æ‹¡å¼µæ€§åˆ¶é™ | ä½ |

---

## ç¬¬2éƒ¨: ã‚³ãƒãƒ³ãƒ‰äº’æ›æ€§è©³ç´°åˆ†æ

### 2.1 ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒãƒ³ãƒ‰å®Œå…¨æ¯”è¼ƒãƒãƒˆãƒªã‚¯ã‚¹

| ã‚³ãƒãƒ³ãƒ‰ | åç§° | Delphiå®Ÿè£… | Pythonå®Ÿè£… | äº’æ›æ€§ | å‚™è€ƒ |
|---------|------|-----------|-----------|--------|------|
| **N** | News (æ–°ç€è¡¨ç¤º) | `News()` | `news()` | âœ… å®Œå…¨äº’æ› | ã‚ªãƒ¼ãƒˆãƒªãƒ¼ãƒ‰ (@) å¯¾å¿œ |
| **N@** | å…¨ãƒ‹ãƒ¥ãƒ¼ã‚¹è‡ªå‹•èª­è¾¼ | `News()` + auto\_read | `news()` + auto\_read | âœ… å®Œå…¨äº’æ› | é€£ç¶šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¯¾å¿œ |
| **R** | Read (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­è¾¼) | `ReadMessage()` | `read_board()` | âœ… åŸºæœ¬äº’æ› | ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ç°¡ç•¥åŒ– |
| **E** | Enter (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿) | `Enter()` | `enter_message()` | âœ… åŸºæœ¬äº’æ› | ãƒ¡ãƒ¼ãƒ«/ãƒ¬ã‚¹æŠ•ç¨¿ã¯æœªå®Ÿè£… |
| **M** | Mail (ãƒ¡ãƒ¼ãƒ«) | `Mail()` | `read_mail()` | âŒ æœªå®Ÿè£… | ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã¿ |
| **H** | Help (ãƒ˜ãƒ«ãƒ—) | `Puts(HelpMessage)` | `show_help()` | âœ… å®Œå…¨äº’æ› | |
| **?** | Help (ãƒ˜ãƒ«ãƒ—) | `Puts(HelpMessage)` | `show_help()` | âœ… å®Œå…¨äº’æ› | Hã¨åŒç­‰ |
| **U** | Users (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆ) | `Users()` | `show_users()` | âœ… å®Œå…¨äº’æ› | æœ€è¿‘20äººè¡¨ç¤º |
| **W** | Who (ãƒ­ã‚°ã‚¤ãƒ³ä¸­) | `Who()` | `who_online()` | âš ï¸ éƒ¨åˆ†äº’æ› | Pythonç‰ˆã¯è‡ªåˆ†ã®ã¿è¡¨ç¤º |
| **C** | Chat (ãƒãƒ£ãƒƒãƒˆ) | `Chat()` | `chat()` | âš ï¸ éƒ¨åˆ†äº’æ› | å˜ä¸€ãƒ«ãƒ¼ãƒ ã€åŸºæœ¬æ©Ÿèƒ½ã®ã¿ |
| **Y** | System Info | `Puts(SysInfoMessage)` | `system_info()` | âœ… å®Œå…¨äº’æ› | |
| **_** | Version (ãƒãƒ¼ã‚¸ãƒ§ãƒ³) | `Version()` | `version()` | âœ… å®Œå…¨äº’æ› | ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ |
| **#** | Status (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹) | `SendUserInfo()` | `status()` | âœ… å®Œå…¨äº’æ› | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º |
| **Q** | Quit (ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ) | `Goodbye(True)` | `logout()` | âœ… å®Œå…¨äº’æ› | |
| **G** | Goodbye (ã‚°ãƒƒãƒ‰ãƒã‚¤) | `Goodbye(False)` | - | âš ï¸ éƒ¨åˆ†äº’æ› | Qã«çµ±åˆæ¸ˆã¿ |
| **A** | Apply (ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²) | `Apply()` | - | âŒ æœªå®Ÿè£… | |
| **K** | Kill (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤) | `Kill()` | - | âŒ æœªå®Ÿè£… | |
| **I** | Install (è¨­å®š) | `Install()` | - | âŒ æœªå®Ÿè£… | |
| **L** | Log (ãƒ­ã‚°è¡¨ç¤º) | `Log()` | - | âŒ æœªå®Ÿè£… | |
| **O** | Profile (ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«) | `Profile()` | - | âŒ æœªå®Ÿè£… | |
| **S** | Sysop Call | `SysopCall()` | - | âŒ æœªå®Ÿè£… | |
| **T** | Telegram (é›»å ±) | `Telegram()` | - | âŒ æœªå®Ÿè£… | |
| **X** | IP Address | `Ip()` | - | âŒ æœªå®Ÿè£… | |
| **P** | Free Post | `FreePost()` | - | âŒ æœªå®Ÿè£… | |
| **@** | Sysop (ç®¡ç†è€…æ©Ÿèƒ½) | `Sysop()` | - | âŒ æœªå®Ÿè£… | |
| **F** | File (ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½) | `FileMain()` | - | âŒ æœªå®Ÿè£… | |
| **%** | Change Mode | `ChangeMode()` | - | âŒ æœªå®Ÿè£… | ç‰¹æ®Šæ©Ÿèƒ½ |
| **!** | Game (ã‚²ãƒ¼ãƒ ) | `Game()` | - | âŒ æœªå®Ÿè£… | å¤–éƒ¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ èµ·å‹• |

**çµ±è¨ˆ**:
- **å®Œå…¨äº’æ›**: 9ã‚³ãƒãƒ³ãƒ‰ (34.6%)
- **éƒ¨åˆ†äº’æ›**: 3ã‚³ãƒãƒ³ãƒ‰ (11.5%)
- **æœªå®Ÿè£…**: 14ã‚³ãƒãƒ³ãƒ‰ (53.8%)

### 2.2 å„ã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°å‹•ä½œæ¯”è¼ƒ

#### 2.2.1 News (N) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 2216-2467)**:
```pascal
Procedure TMtBbs.News;
// æ—¥ä»˜æŒ‡å®šå…¥åŠ› (+ ã¾ãŸã¯ +YY/MM/DD)
// æ²ç¤ºæ¿ã”ã¨ã«æ–°ç€ãƒã‚§ãƒƒã‚¯
// ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ: [RET]=èª­è¾¼, S=ã‚¹ã‚­ãƒƒãƒ—, 0=çµ‚äº†
// èª­è¾¼å¾Œã€æœ€çµ‚èª­äº†æ—¥æ™‚ã‚’æ›´æ–°
```

**Pythonç‰ˆ (telnet_handler.py: 361-395)**:
```python
async def news(self):
    auto_read = "@" in self.command_line
    # æ–°ç€ã®ã‚ã‚‹æ²ç¤ºæ¿ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º
    # auto_readæ™‚ã¯å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è‡ªå‹•è¡¨ç¤º
    # èª­è¾¼ä½ç½®ã‚’æ›´æ–°
```

**äº’æ›æ€§**: âœ… **å®Œå…¨äº’æ›**
- ã‚ªãƒ¼ãƒˆãƒªãƒ¼ãƒ‰æ©Ÿèƒ½ (`@`) ãŒä¸¡æ–¹ã§å®Ÿè£…
- èª­è¾¼ä½ç½®è¿½è·¡æ©Ÿèƒ½ãŒåŒç­‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ãŒé¡ä¼¼

**å·®ç•°**:
- Delphiç‰ˆ: æ—¥ä»˜æŒ‡å®šæ©Ÿèƒ½ã‚ã‚Š
- Pythonç‰ˆ: æ—¥ä»˜æŒ‡å®šãªã—ï¼ˆå¸¸ã«æœ€çµ‚èª­äº†æ—¥æ™‚ä»¥é™ï¼‰

#### 2.2.2 Read Message (R) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 2734-2816)**:
```pascal
Procedure TMtBbs.ReadMessage;
// æ²ç¤ºæ¿ç•ªå·å…¥åŠ›
// ReadMenuMessageè¡¨ç¤º
// ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰:
//   R: é †æ¬¡èª­è¾¼
//   I: å€‹åˆ¥èª­è¾¼
//   S: æ¤œç´¢
//   L: ãƒªã‚¹ãƒˆè¡¨ç¤º
//   F: ãƒ•ã‚©ãƒ«ãƒ€æ“ä½œ
//   #: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
```

**Pythonç‰ˆ (telnet_handler.py: 397-474)**:
```python
async def read_board(self):
    # æ²ç¤ºæ¿ç•ªå·ã‚’command_lineã¾ãŸã¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰å–å¾—
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆæœ€è¿‘20ä»¶ï¼‰
    # ç•ªå·å…¥åŠ›ã§å€‹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    # ã‚ªãƒ¼ãƒˆãƒªãƒ¼ãƒ‰ (@) å¯¾å¿œ
```

**äº’æ›æ€§**: âš ï¸ **éƒ¨åˆ†äº’æ›**
- åŸºæœ¬çš„ãªèª­è¾¼æ©Ÿèƒ½ã¯åŒç­‰
- é€£ç¶šã‚³ãƒãƒ³ãƒ‰ (`r0@`) å¯¾å¿œ

**å·®ç•°**:
- **ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ **: Delphiç‰ˆã¯7ç¨®ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã€Pythonç‰ˆã¯ç›´æ¥é¸æŠ
- **æ¤œç´¢æ©Ÿèƒ½**: Delphiç‰ˆã¯å®Ÿè£…ã€Pythonç‰ˆã¯æœªå®Ÿè£…
- **ãƒ•ã‚©ãƒ«ãƒ€æ“ä½œ**: Delphiç‰ˆã®ã¿

#### 2.2.3 Enter Message (E) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 3420-3439)**:
```pascal
Procedure TMtBbs.Enter;
// ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º
//   M: ãƒ¡ãƒ¼ãƒ«é€ä¿¡
//   B: ãƒã‚¤ãƒŠãƒªãƒ¡ãƒ¼ãƒ«é€ä¿¡
//   W: æ²ç¤ºæ¿æŠ•ç¨¿
//   R: ãƒ¬ã‚¹æŠ•ç¨¿
```

**Pythonç‰ˆ (telnet_handler.py: 476-544)**:
```python
async def enter_message(self):
    # æ²ç¤ºæ¿ç•ªå·ã‚’command_lineã‹ã‚‰å–å¾—
    # ã‚¿ã‚¤ãƒˆãƒ«å…¥åŠ›
    # æœ¬æ–‡å…¥åŠ›ï¼ˆ"."ã§çµ‚äº†ï¼‰
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿
```

**äº’æ›æ€§**: âš ï¸ **éƒ¨åˆ†äº’æ›**
- æ²ç¤ºæ¿æŠ•ç¨¿æ©Ÿèƒ½ã¯å®Ÿè£…æ¸ˆã¿
- é€£ç¶šã‚³ãƒãƒ³ãƒ‰ (`e1`) å¯¾å¿œ

**å·®ç•°**:
- **ãƒ¡ãƒ¼ãƒ«æ©Ÿèƒ½**: Delphiç‰ˆã®M/Bã‚³ãƒãƒ³ãƒ‰æœªå®Ÿè£…
- **ãƒ¬ã‚¹æ©Ÿèƒ½**: Delphiç‰ˆã®Rã‚³ãƒãƒ³ãƒ‰æœªå®Ÿè£…
- **ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: Pythonç‰ˆã¯æ²ç¤ºæ¿æŠ•ç¨¿ã®ã¿ç›´æ¥å®Ÿè¡Œ

#### 2.2.4 Mail (M) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 1340-1475)**:
```pascal
Procedure TMtBbs.Mail;
// ãƒ¡ãƒ¼ãƒ«ç¨®åˆ¥é¸æŠ (å—ä¿¡/é€ä¿¡)
// ãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆè¡¨ç¤º
// å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«èª­è¾¼
// å‰Šé™¤ç¢ºèª
// ãƒã‚¤ãƒŠãƒªãƒ¡ãƒ¼ãƒ«å¯¾å¿œ
```

**Pythonç‰ˆ (telnet_handler.py: 593-594)**:
```python
async def read_mail(self):
    await self.send_line("Mail system is not yet implemented.")
```

**äº’æ›æ€§**: âŒ **æœªå®Ÿè£…**

#### 2.2.5 Chat (C) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 4096ä»¥é™)**:
```pascal
Procedure TMtBbs.Chat;
// ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ä¸€è¦§è¡¨ç¤º (20å€‹)
// ãƒ«ãƒ¼ãƒ é¸æŠ/ä½œæˆ
// ãƒãƒ£ãƒƒãƒˆå†…ã‚³ãƒãƒ³ãƒ‰:
//   /profile: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
//   /who: ãƒ«ãƒ¼ãƒ å†…ãƒ¦ãƒ¼ã‚¶ãƒ¼
//   /telegram: é›»å ±é€ä¿¡
//   /main: ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸
// ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ¢ãƒ¼ãƒ‰:
//   RotenFuro (éœ²å¤©é¢¨å‘‚)
//   Yasyoku (å¤œé£Ÿ)
```

**Pythonç‰ˆ (telnet_handler.py: 602-652)**:
```python
async def chat(self):
    # ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ å‚åŠ ã‚¢ãƒŠã‚¦ãƒ³ã‚¹
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ—
    # çµ‚äº†ã‚³ãƒãƒ³ãƒ‰: // ã¾ãŸã¯ ^^
    # ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæ©Ÿèƒ½
```

**äº’æ›æ€§**: âš ï¸ **éƒ¨åˆ†äº’æ›**
- åŸºæœ¬çš„ãªãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã¯å®Ÿè£…
- ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œ

**å·®ç•°**:
- **ãƒ«ãƒ¼ãƒ æ•°**: Delphiç‰ˆã¯20å€‹ã€Pythonç‰ˆã¯1å€‹
- **å†…éƒ¨ã‚³ãƒãƒ³ãƒ‰**: Delphiç‰ˆã® `/profile`, `/who` ç­‰ãªã—
- **ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ¢ãƒ¼ãƒ‰**: Pythonç‰ˆã¯æœªå®Ÿè£…

#### 2.2.6 Who (W) ã‚³ãƒãƒ³ãƒ‰

**Delphiç‰ˆ (MtBbs.pas: 4727ä»¥é™)**:
```pascal
Procedure TMtBbs.Who;
// å…¨ãƒãƒ£ãƒãƒ« (100å€‹) ã‚’ã‚¹ã‚­ãƒ£ãƒ³
// ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º
// ID, Handle, Where, LoginTimeè¡¨ç¤º
```

**Pythonç‰ˆ (telnet_handler.py: 597-600)**:
```python
async def who_online(self):
    # è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ã¿è¡¨ç¤º
    await self.send_line(f"Online: {self.user_id} ({self.handle_name})")
```

**äº’æ›æ€§**: âš ï¸ **éƒ¨åˆ†äº’æ›**

**å·®ç•°**:
- **è¡¨ç¤ºç¯„å›²**: Delphiç‰ˆã¯å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€Pythonç‰ˆã¯è‡ªåˆ†ã®ã¿
- **æƒ…å ±è©³ç´°åº¦**: Delphiç‰ˆã¯Where/LoginTimeå«ã‚€

### 2.3 ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ ã®æ¯”è¼ƒ

#### 2.3.1 ReadMessage (R) ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ | Delphiå®Ÿè£… | Pythonå®Ÿè£… | èª¬æ˜ |
|------------|-----------|-----------|------|
| R (é †æ¬¡èª­è¾¼) | âœ… | âŒ | æœ€å¾Œã‹ã‚‰é †æ¬¡è¡¨ç¤º |
| I (å€‹åˆ¥èª­è¾¼) | âœ… | âœ… | ç•ªå·æŒ‡å®šã§è¡¨ç¤ºï¼ˆPythonç‰ˆã¯æ¨™æº–å‹•ä½œï¼‰ |
| S (æ¤œç´¢) | âš ï¸ æœªå®Ÿè£… | âŒ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ |
| L (ãƒªã‚¹ãƒˆ) | âœ… | âœ… | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ï¼ˆPythonç‰ˆã¯æ¨™æº–å‹•ä½œï¼‰ |
| F (ãƒ•ã‚©ãƒ«ãƒ€) | âœ… | âŒ | ãƒ•ã‚©ãƒ«ãƒ€æ“ä½œ |
| # (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹) | âœ… | âŒ | æ²ç¤ºæ¿æƒ…å ±è¡¨ç¤º |
| ? (ãƒ˜ãƒ«ãƒ—) | âœ… | âŒ | ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ˜ãƒ«ãƒ— |

**Pythonç‰ˆã®ç°¡ç•¥åŒ–ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
- ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’å»ƒæ­¢ã—ã€ç›´æ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é¸æŠ
- ãƒªã‚¹ãƒˆè¡¨ç¤º â†’ ç•ªå·å…¥åŠ› â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã®ç›´ç·šçš„ãƒ•ãƒ­ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¯ç°¡æ½”ã ãŒã€é«˜åº¦ãªæ“ä½œã¯ä¸å¯

#### 2.3.2 Enter (E) ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ | Delphiå®Ÿè£… | Pythonå®Ÿè£… | èª¬æ˜ |
|------------|-----------|-----------|------|
| W (æ²ç¤ºæ¿æŠ•ç¨¿) | âœ… | âœ… | æ²ç¤ºæ¿ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿ |
| M (ãƒ¡ãƒ¼ãƒ«é€ä¿¡) | âœ… | âŒ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ãƒ¡ãƒ¼ãƒ«é€ä¿¡ |
| B (ãƒã‚¤ãƒŠãƒªãƒ¡ãƒ¼ãƒ«) | âœ… | âŒ | ãƒ•ã‚¡ã‚¤ãƒ«æ·»ä»˜ãƒ¡ãƒ¼ãƒ« |
| R (ãƒ¬ã‚¹æŠ•ç¨¿) | âœ… | âŒ | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã®è¿”ä¿¡ |

#### 2.3.3 Install (I) ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼

**Delphiç‰ˆã®ã¿å®Ÿè£…**:

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ | æ©Ÿèƒ½ | é‡è¦åº¦ |
|------------|------|--------|
| ENTRY | æ²ç¤ºæ¿è³¼èª­è¨­å®š (è¿½åŠ /å‰Šé™¤/å…¨è¿½åŠ /ãƒªã‚»ãƒƒãƒˆ) | é«˜ |
| P | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´ | é«˜ |
| R | æœ€çµ‚èª­äº†æ—¥æ™‚è¨­å®š | ä¸­ |
| H | ãƒãƒ³ãƒ‰ãƒ«åè¨­å®š | é«˜ |
| M | ãƒ¡ãƒ¢è¨­å®š | ä½ |
| A | ãƒ­ã‚°ã‚¤ãƒ³é€šçŸ¥è¨­å®š | ä¸­ |
| N | ãƒ‹ãƒ¥ãƒ¼ã‚¹è³¼èª­è¨­å®š | ä¸­ |
| D | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š | ä¸­ |
| E | ECHOè¨­å®š | ä½ |
| Y | èª­è¾¼ã‚¹ã‚­ãƒƒãƒ—è¨­å®š | ä½ |
| S | ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± | ä½ |
| L | ãƒ­ã‚°è¡¨ç¤º | ä½ |

**Pythonç‰ˆ**: å®Œå…¨æœªå®Ÿè£…

#### 2.3.4 SYSOP (@) ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼

**Delphiç‰ˆã®ã¿å®Ÿè£…**:

| ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ | æ©Ÿèƒ½ | é‡è¦åº¦ |
|------------|------|--------|
| A | Applyå‡¦ç†ï¼ˆç®¡ç†è€…ã¨ã—ã¦å®Ÿè¡Œï¼‰ | é«˜ |
| Q | çµ‚äº† | ä½ |
| R | è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰ (INI/DATå†èª­è¾¼) | é«˜ |
| L | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«å¤‰æ›´ | é«˜ |
| K | ãƒãƒ£ãƒãƒ«å‰Šé™¤ï¼ˆã‚­ãƒƒã‚¯ï¼‰ | é«˜ |
| M/# | (æœªå®Ÿè£…è¡¨ç¤º) | - |

**Pythonç‰ˆ**: å®Œå…¨æœªå®Ÿè£…

### 2.4 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†ã¨é€£ç¶šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

#### 2.4.1 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

**Delphiç‰ˆ**:
```pascal
CommandLine : String[255];  // ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ãƒ¬ãƒ™ãƒ«å¤‰æ•°

// ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
Cl := UpperCase(InputCommand('MAIN>',True));
// ä¾‹: "R0@" â†’ Cl = "R0@"

// Rã‚³ãƒãƒ³ãƒ‰å‡¦ç†å†…
if (CommandLine+'*')[1] = '0' then
    BoardNo := 0;
// CommandLineã« "0@" ãŒä¿æŒã•ã‚Œã‚‹
```

**Pythonç‰ˆ**:
```python
self.command_line: str = ""  # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°

# ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
full_cmd = command.upper().strip()
cmd = full_cmd[0] if full_cmd else ""
self.command_line = full_cmd[1:] if len(full_cmd) > 1 else ""
# ä¾‹: "r0@" â†’ cmd = "R", command_line = "0@"

# read_board() å†…
if self.command_line:
    board_no_str = self.command_line.rstrip("@")
    # board_no_str = "0"
    auto_read = "@" in self.command_line
```

**äº’æ›æ€§**: âœ… **å®Œå…¨äº’æ›** - ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã¯åŒç­‰

#### 2.4.2 é€£ç¶šã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œä¾‹ã®å®Œå…¨æ¯”è¼ƒ

| ã‚³ãƒãƒ³ãƒ‰ä¾‹ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | Delphiå‹•ä½œ | Pythonå‹•ä½œ | äº’æ›æ€§ |
|----------|----------|-----------|-----------|--------|
| `n` | ãªã— | ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºã€æ²ç¤ºæ¿ã”ã¨ã«ç¢ºèª | åŒå·¦ | âœ… |
| `n@` | `@` (ã‚ªãƒ¼ãƒˆ) | å…¨ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è‡ªå‹•èª­è¾¼ã€ç¢ºèªãªã— | åŒå·¦ | âœ… |
| `r` | ãªã— | æ²ç¤ºæ¿ç•ªå·å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | åŒå·¦ | âœ… |
| `r0` | `0` | æ²ç¤ºæ¿0é¸æŠã€ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º | æ²ç¤ºæ¿0é¸æŠã€ãƒªã‚¹ãƒˆè¡¨ç¤º | âš ï¸ |
| `r0@` | `0@` | æ²ç¤ºæ¿0ã®å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è‡ªå‹•èª­è¾¼ | åŒå·¦ | âœ… |
| `r5` | `5` | æ²ç¤ºæ¿5é¸æŠã€ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º | æ²ç¤ºæ¿5é¸æŠã€ãƒªã‚¹ãƒˆè¡¨ç¤º | âš ï¸ |
| `e` | ãªã— | æŠ•ç¨¿ç¨®åˆ¥ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º | æ²ç¤ºæ¿ç•ªå·å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | âŒ |
| `e1` | `1` | æŠ•ç¨¿ç¨®åˆ¥ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º | æ²ç¤ºæ¿1ã¸ç›´æ¥æŠ•ç¨¿é–‹å§‹ | âš ï¸ |
| `e0w` | `0w` | æ²ç¤ºæ¿0ã¸æŠ•ç¨¿ (Wã‚³ãƒãƒ³ãƒ‰) | æ²ç¤ºæ¿0ã¸ç›´æ¥æŠ•ç¨¿ | âš ï¸ |

**æ³¨**: âš ï¸ ã¯å‹•ä½œã™ã‚‹ãŒã€UIãƒ•ãƒ­ãƒ¼ãŒç•°ãªã‚‹å ´åˆ

---

## ç¬¬3éƒ¨: ã‚³ãƒãƒ³ãƒ‰é·ç§»ãƒ­ã‚¸ãƒƒã‚¯åˆ†æ

### 3.1 Delphiç‰ˆã®çŠ¶æ…‹é·ç§»å›³

```mermaid
stateDiagram-v2
    [*] --> Login: æ¥ç¶š
    Login --> Main: èªè¨¼æˆåŠŸ
    Login --> [*]: èªè¨¼å¤±æ•—(3å›)

    Main --> News: N
    Main --> ReadMessage: R
    Main --> Enter: E
    Main --> Mail: M
    Main --> Chat: C
    Main --> Who: W
    Main --> Users: U
    Main --> Profile: O
    Main --> Install: I
    Main --> Sysop: @
    Main --> FileMain: F
    Main --> Telegram: T
    Main --> Kill: K
    Main --> Log: L
    Main --> [*]: Q (Quit)

    News --> Main: èª­è¾¼å®Œäº†

    ReadMessage --> ReadSubMenu: æ²ç¤ºæ¿é¸æŠ
    ReadSubMenu --> ReadMessage: R/I/L (èª­è¾¼)
    ReadSubMenu --> Main: 0 (çµ‚äº†)

    Enter --> EnterSubMenu: ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    EnterSubMenu --> WriteMessage: W
    EnterSubMenu --> WriteMail: M/B
    EnterSubMenu --> WriteResponse: R
    EnterSubMenu --> Main: 0
    WriteMessage --> Main: æŠ•ç¨¿å®Œäº†
    WriteMail --> Main: é€ä¿¡å®Œäº†
    WriteResponse --> Main: æŠ•ç¨¿å®Œäº†

    Mail --> MailSubMenu: å—ä¿¡/é€ä¿¡é¸æŠ
    MailSubMenu --> ReadMail: å€‹åˆ¥èª­è¾¼
    MailSubMenu --> Mail: ãƒªã‚¹ãƒˆ
    MailSubMenu --> Main: 0
    ReadMail --> Main: å‰Šé™¤ç¢ºèª

    Chat --> ChatRoom: ãƒ«ãƒ¼ãƒ é¸æŠ
    ChatRoom --> Main: /main or 0

    FileMain --> FileSubMenu: ãƒ•ã‚¡ã‚¤ãƒ«æ²ç¤ºæ¿é¸æŠ
    FileSubMenu --> Upload: U
    FileSubMenu --> Download: D
    FileSubMenu --> Main: 0
    Upload --> FileSubMenu: å®Œäº†
    Download --> FileSubMenu: å®Œäº†

    Install --> InstallSubMenu: ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰
    InstallSubMenu --> Install: å„ç¨®è¨­å®š
    InstallSubMenu --> Main: 0

    Sysop --> SysopSubMenu: ç®¡ç†è€…ã‚³ãƒãƒ³ãƒ‰
    SysopSubMenu --> Sysop: å„ç¨®æ“ä½œ
    SysopSubMenu --> Main: Q

    Who --> Main: è¡¨ç¤ºå®Œäº†
    Users --> Main: è¡¨ç¤ºå®Œäº†
    Profile --> Main: ç·¨é›†å®Œäº†
    Telegram --> Main: é€ä¿¡å®Œäº†
    Kill --> Main: å‰Šé™¤å®Œäº†
    Log --> Main: è¡¨ç¤ºå®Œäº†
```

### 3.2 Pythonç‰ˆã®çŠ¶æ…‹é·ç§»å›³

```mermaid
stateDiagram-v2
    [*] --> Login: æ¥ç¶š
    Login --> EnforcedNews: èªè¨¼æˆåŠŸ
    Login --> [*]: èªè¨¼å¤±æ•—(3å›)

    EnforcedNews --> Main: å¼·åˆ¶ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºå®Œäº†

    Main --> News: N
    Main --> ReadBoard: R
    Main --> EnterMessage: E
    Main --> ReadMail: M
    Main --> Chat: C
    Main --> WhoOnline: W
    Main --> ShowUsers: U
    Main --> ShowHelp: H/?
    Main --> SystemInfo: Y
    Main --> Version: _
    Main --> Status: #
    Main --> [*]: Q (Quit)

    News --> Main: èª­è¾¼å®Œäº†

    ReadBoard --> MessageList: æ²ç¤ºæ¿é¸æŠ
    MessageList --> DisplayMessage: ç•ªå·å…¥åŠ›
    DisplayMessage --> Main: è¡¨ç¤ºå®Œäº†

    EnterMessage --> InputTitle: æ²ç¤ºæ¿é¸æŠ
    InputTitle --> InputBody: ã‚¿ã‚¤ãƒˆãƒ«å…¥åŠ›
    InputBody --> PostMessage: æœ¬æ–‡å…¥åŠ›
    PostMessage --> Main: æŠ•ç¨¿å®Œäº†

    ReadMail --> Main: æœªå®Ÿè£…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

    Chat --> ChatLoop: å‚åŠ ã‚¢ãƒŠã‚¦ãƒ³ã‚¹
    ChatLoop --> Main: // or ^^

    WhoOnline --> Main: è¡¨ç¤ºå®Œäº†
    ShowUsers --> Main: è¡¨ç¤ºå®Œäº†
    ShowHelp --> Main: è¡¨ç¤ºå®Œäº†
    SystemInfo --> Main: è¡¨ç¤ºå®Œäº†
    Version --> Main: è¡¨ç¤ºå®Œäº†
    Status --> Main: è¡¨ç¤ºå®Œäº†
```

### 3.3 é·ç§»ãƒ­ã‚¸ãƒƒã‚¯ã®å·®ç•°åˆ†æ

#### 3.3.1 éšå±¤ã®æ·±ã•

| é …ç›® | Delphiç‰ˆ | Pythonç‰ˆ |
|-----|---------|---------|
| æœ€å¤§éšå±¤æ•° | 4éšå±¤ (Main â†’ E â†’ W â†’ æŠ•ç¨¿ â†’ Main) | 3éšå±¤ (Main â†’ E â†’ æŠ•ç¨¿ â†’ Main) |
| ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•° | 6å€‹ (Read, Enter, Mail, File, Install, Sysop) | 0å€‹ |
| å¹³å‡é·ç§»ã‚¹ãƒ†ãƒƒãƒ—æ•° | 3.5ã‚¹ãƒ†ãƒƒãƒ— | 2.2ã‚¹ãƒ†ãƒƒãƒ— |

**åˆ†æ**: Pythonç‰ˆã¯éšå±¤ã‚’å‰Šæ¸›ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚¹ãƒ†ãƒƒãƒ—ã‚’ç°¡ç•¥åŒ–

#### 3.3.2 ãƒ«ãƒ¼ãƒ—ãƒãƒƒã‚¯çµŒè·¯

**Delphiç‰ˆ**:
- ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã®æˆ»ã‚Š: å„ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æ˜ç¤ºçš„ãªçµ‚äº†ã‚³ãƒãƒ³ãƒ‰ (`0`)
- ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ãƒ«ãƒ¼ãƒ—: R â†’ ReadSubMenu â†’ R (é€£ç¶šèª­è¾¼å¯èƒ½)

**Pythonç‰ˆ**:
- ç›´æ¥Mainã¸æˆ»ã‚‹: ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒãªã„ãŸã‚ã€å„ã‚³ãƒãƒ³ãƒ‰çµ‚äº†å¾Œå³Mainã¸
- ãƒ«ãƒ¼ãƒ—ãªã—: é€£ç¶šæ“ä½œã«ã¯å†åº¦ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ãŒå¿…è¦

**åˆ†æ**: Delphiç‰ˆã¯ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…ã§ã®é€£ç¶šæ“ä½œã«å„ªã‚Œã‚‹ã€Pythonç‰ˆã¯å˜ç´”æ˜å¿«

#### 3.3.3 å¼·åˆ¶ãƒ•ãƒ­ãƒ¼

**Delphiç‰ˆ**:
- ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å³Main
- ã‚ªãƒ—ã‚·ãƒ§ãƒ³: ãƒ­ã‚°ã‚¤ãƒ³é€šçŸ¥å—ä¿¡

**Pythonç‰ˆ**:
- ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å¼·åˆ¶ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤º (`enforced_news=true`ã®æ²ç¤ºæ¿)
- å¼·åˆ¶ãƒ‹ãƒ¥ãƒ¼ã‚¹å®Œäº†å¾Œã€Main

**åˆ†æ**: Pythonç‰ˆã¯é‡è¦ãªæƒ…å ±ã‚’ç¢ºå®Ÿã«ä¼é”ã™ã‚‹ä»•çµ„ã¿

### 3.4 ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼æ¯”è¼ƒ

#### 3.4.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼

**Delphiç‰ˆ**:
```
Main â†’ E â†’ ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º
     â”œâ”€ W: æ²ç¤ºæ¿ç•ªå·å…¥åŠ› â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ æœ¬æ–‡ â†’ ç¢ºèª â†’ æŠ•ç¨¿
     â”œâ”€ M: å®›å…ˆIDå…¥åŠ› â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ æœ¬æ–‡ â†’ ç¢ºèª â†’ é€ä¿¡
     â””â”€ R: æ²ç¤ºæ¿ç•ªå· â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç•ªå· â†’ æœ¬æ–‡ â†’ ç¢ºèª â†’ æŠ•ç¨¿
```

**Pythonç‰ˆ**:
```
Main â†’ E (+ æ²ç¤ºæ¿ç•ªå·) â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ æœ¬æ–‡ (. ã§çµ‚äº†) â†’ æŠ•ç¨¿ â†’ Main
```

**ãƒ•ãƒ­ãƒ¼åŠ¹ç‡**:
- Delphiç‰ˆ: 5-7ã‚¹ãƒ†ãƒƒãƒ— (ç¢ºèªå«ã‚€)
- Pythonç‰ˆ: 3-4ã‚¹ãƒ†ãƒƒãƒ—

**åˆ†æ**: Pythonç‰ˆã¯åŠ¹ç‡çš„ã ãŒã€æŸ”è»Ÿæ€§ã«æ¬ ã‘ã‚‹ï¼ˆãƒ¡ãƒ¼ãƒ«/ãƒ¬ã‚¹ä¸å¯ï¼‰

#### 3.4.2 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­è¾¼ãƒ•ãƒ­ãƒ¼

**Delphiç‰ˆ**:
```
Main â†’ R â†’ æ²ç¤ºæ¿ç•ªå· â†’ ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼
     â”œâ”€ R: é–‹å§‹ç•ªå· â†’ é †æ¬¡è¡¨ç¤º â†’ [RET]/P/R/+/-/0
     â”œâ”€ I: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç•ªå· â†’ è¡¨ç¤º â†’ [RET]/P/R/+/-/0
     â””â”€ L: ãƒªã‚¹ãƒˆè¡¨ç¤º â†’ ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼
```

**Pythonç‰ˆ**:
```
Main â†’ R (+ æ²ç¤ºæ¿ç•ªå·) â†’ ãƒªã‚¹ãƒˆè¡¨ç¤º â†’ ç•ªå·å…¥åŠ› â†’ è¡¨ç¤º â†’ Main
ã¾ãŸã¯
Main â†’ R0@ â†’ å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è‡ªå‹•è¡¨ç¤º â†’ Main
```

**ãƒ•ãƒ­ãƒ¼åŠ¹ç‡**:
- Delphiç‰ˆ: 4-6ã‚¹ãƒ†ãƒƒãƒ— (ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµŒç”±)
- Pythonç‰ˆ: 3-4ã‚¹ãƒ†ãƒƒãƒ— (ç›´æ¥é¸æŠ)

**åˆ†æ**: Pythonç‰ˆã¯åˆå¿ƒè€…ã«å„ªã—ã„ãŒã€é«˜åº¦ãªæ“ä½œï¼ˆæ¤œç´¢ç­‰ï¼‰ã¯ä¸å¯

---

## ç¬¬4éƒ¨: æ¨©é™ç®¡ç†ã¨ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### 4.1 æ¨©é™ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆæ¯”è¼ƒ

#### 4.1.1 Delphiç‰ˆã®æ¨©é™ã‚·ã‚¹ãƒ†ãƒ 

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**:
```pascal
Type
  TUserLevel = 0..9;  // 0=Guest, 1-8=User, 9=SYSOP
  TKinou = (
    _Users, _Whos, _Chat, _Telegram, _SysopCall,
    _Profile, _Log, _Ip, _EnterMail, _Mail, _FreePost
    // 29ç¨®é¡ã®æ©Ÿèƒ½
  );

// æ¨©é™ãƒã‚§ãƒƒã‚¯é–¢æ•°
Function CheckUseLevel(kinou : TKinou):Boolean;
Begin
  Result := User.Level < GeneralDefine.CanUseLevels[Kinou][User.Level];
  // True = ä½¿ç”¨ç¦æ­¢, False = ä½¿ç”¨å¯èƒ½
End;
```

**ç‰¹å¾´**:
- **æ©Ÿèƒ½å˜ä½ã®æ¨©é™ç®¡ç†**: 29ç¨®é¡ã®æ©Ÿèƒ½ã”ã¨ã«ä½¿ç”¨å¯èƒ½ãƒ¬ãƒ™ãƒ«ã‚’å®šç¾©
- **æŸ”è»Ÿãªæ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹**: å„æ©Ÿèƒ½Ã—å„ãƒ¬ãƒ™ãƒ«ã®çµ„ã¿åˆã‚ã›ã§åˆ¶å¾¡
- **å‹•çš„ãªæ¨©é™å¤‰æ›´**: INIãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šå¯èƒ½
- **SYSOPæ¨©é™**: ç‰¹åˆ¥ãªãƒ¬ãƒ™ãƒ«9ã§å…¨æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

**æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹ä¾‹**:
```
æ©Ÿèƒ½ \ ãƒ¬ãƒ™ãƒ« | 0 (Guest) | 1-4 (User) | 5-8 (Power) | 9 (SYSOP)
---------------------------------------------------------------
_Users        |     X     |     âœ“      |      âœ“      |     âœ“
_Chat         |     âœ“     |     âœ“      |      âœ“      |     âœ“
_Telegram     |     X     |     âœ“      |      âœ“      |     âœ“
_SysopCall    |     X     |     X      |      âœ“      |     âœ“
_Mail         |     X     |     âœ“      |      âœ“      |     âœ“
_Profile      |     X     |     âœ“      |      âœ“      |     âœ“
```

#### 4.1.2 Pythonç‰ˆã®æ¨©é™ã‚·ã‚¹ãƒ†ãƒ 

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**:
```python
# User Model
class User:
    user_id: str
    level: int  # 0=Guest, 1-8=User, 9=SYSOP
    # ...

# Board Model
class Board:
    board_id: int
    read_level: int   # èª­ã¿å–ã‚Šè¨±å¯ãƒ¬ãƒ™ãƒ«
    write_level: int  # æ›¸ãè¾¼ã¿è¨±å¯ãƒ¬ãƒ™ãƒ«
    # ...

# ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚§ãƒƒã‚¯
if board.read_level > self.user_level:
    await self.send_line("Access denied. Insufficient level.")
    return

if board.write_level > self.user_level:
    await self.send_line("Access denied. Insufficient level.")
    return
```

**ç‰¹å¾´**:
- **æ²ç¤ºæ¿å˜ä½ã®æ¨©é™ç®¡ç†**: å„æ²ç¤ºæ¿ã”ã¨ã«èª­ã¿æ›¸ããƒ¬ãƒ™ãƒ«ã‚’è¨­å®š
- **ã‚·ãƒ³ãƒ—ãƒ«ãªæ•´æ•°æ¯”è¼ƒ**: `user_level >= required_level` ã§åˆ¤å®š
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š**: æ²ç¤ºæ¿ãƒ†ãƒ¼ãƒ–ãƒ«ã§å‹•çš„ã«å¤‰æ›´å¯èƒ½
- **æ©Ÿèƒ½åˆ¥æ¨©é™ãªã—**: ã‚³ãƒãƒ³ãƒ‰è‡ªä½“ã®æ¨©é™ç®¡ç†ã¯æœªå®Ÿè£…

**æ¨©é™ãƒ†ãƒ¼ãƒ–ãƒ«ä¾‹**:
```sql
boards (
    board_id INT,
    name VARCHAR(50),
    read_level INT DEFAULT 0,   -- 0: å…¨å“¡ã€1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€9: SYSOP
    write_level INT DEFAULT 1,  -- 1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€9: SYSOP
    ...
)
```

### 4.2 ã‚¢ã‚¯ã‚»ã‚¹ãƒ¬ãƒ™ãƒ«ã®äº’æ›æ€§

#### 4.2.1 ãƒ¬ãƒ™ãƒ«å®šç¾©ã®å¯¾å¿œ

| ãƒ¬ãƒ™ãƒ« | Delphiç‰ˆ | Pythonç‰ˆ | äº’æ›æ€§ |
|-------|---------|---------|--------|
| 0 | Guest (ã‚²ã‚¹ãƒˆ) | Guest (ã‚²ã‚¹ãƒˆ) | âœ… åŒç­‰ |
| 1-4 | ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ | âœ… åŒç­‰ |
| 5-8 | ãƒ‘ãƒ¯ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ | æœªä½¿ç”¨ | âš ï¸ å·®ç•° |
| 9 | SYSOP (ç®¡ç†è€…) | æ¦‚å¿µã®ã¿å­˜åœ¨ | âš ï¸ å·®ç•° |

**åˆ†æ**:
- åŸºæœ¬çš„ãªãƒ¬ãƒ™ãƒ«æ§‹é€ ã¯äº’æ›
- Pythonç‰ˆã§ã¯ãƒ¬ãƒ™ãƒ«5-8ã®æ˜ç¢ºãªå½¹å‰²ãŒãªã„
- SYSOPæ©Ÿèƒ½ãŒæœªå®Ÿè£…ã®ãŸã‚ã€ãƒ¬ãƒ™ãƒ«9ã®å®Ÿç”¨æ€§ãªã—

#### 4.2.2 æ©Ÿèƒ½åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å·®ç•°

**Delphiç‰ˆãŒåˆ¶å¾¡ã—ã¦ã„ã‚‹æ©Ÿèƒ½**:
1. **Users (U)**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆè¡¨ç¤º - Gueståˆ¶é™å¯èƒ½
2. **Who (W)**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º - Gueståˆ¶é™å¯èƒ½
3. **Chat (C)**: ãƒãƒ£ãƒƒãƒˆå‚åŠ  - ãƒ¬ãƒ™ãƒ«åˆ¥åˆ¶é™
4. **Telegram (T)**: é›»å ±é€ä¿¡ - Gueståˆ¶é™
5. **SysopCall (S)**: SYSOPå‘¼å‡º - ãƒ¬ãƒ™ãƒ«åˆ¶é™
6. **Profile (O)**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›† - Gueståˆ¶é™
7. **Log (L)**: ãƒ­ã‚°è¡¨ç¤º - ãƒ¬ãƒ™ãƒ«åˆ¶é™
8. **Ip (X)**: IPã‚¢ãƒ‰ãƒ¬ã‚¹è¡¨ç¤º - ãƒ¬ãƒ™ãƒ«åˆ¶é™
9. **EnterMail (E-M)**: ãƒ¡ãƒ¼ãƒ«é€ä¿¡ - Gueståˆ¶é™
10. **Mail (M)**: ãƒ¡ãƒ¼ãƒ«é–²è¦§ - Gueståˆ¶é™
11. **FreePost (P)**: ãƒ•ãƒªãƒ¼ãƒã‚¹ãƒˆ - ãƒ¬ãƒ™ãƒ«åˆ¶é™

**Pythonç‰ˆã®æ¨©é™åˆ¶å¾¡**:
1. **Board Read**: æ²ç¤ºæ¿èª­ã¿å–ã‚Š - `board.read_level`ã§åˆ¶å¾¡
2. **Board Write**: æ²ç¤ºæ¿æ›¸ãè¾¼ã¿ - `board.write_level`ã§åˆ¶å¾¡
3. **ãã®ä»–æ©Ÿèƒ½**: æ¨©é™ãƒã‚§ãƒƒã‚¯ãªã—ï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼‰

**ã‚®ãƒ£ãƒƒãƒ—**:
- **æ©Ÿèƒ½åˆ¥æ¨©é™**: Pythonç‰ˆã§ã¯æœªå®Ÿè£…
- **Gueståˆ¶é™**: æ²ç¤ºæ¿ä»¥å¤–ã®æ©Ÿèƒ½ã§åˆ¶é™ä¸å¯
- **ãƒ¬ãƒ™ãƒ«åˆ¥åˆ¶é™**: ç´°ã‹ã„åˆ¶å¾¡ãŒã§ããªã„

### 4.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®è€ƒæ…®äº‹é …

#### 4.3.1 Delphiç‰ˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

1. **ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œåˆ¶é™**: 3å›å¤±æ•—ã§æ¥ç¶šåˆ‡æ–­
2. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´**: Installãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§å®Ÿæ–½å¯èƒ½
3. **ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´**: å…¨ãƒ­ã‚°ã‚¤ãƒ³ã‚’è¨˜éŒ²
4. **BANãƒ¦ãƒ¼ã‚¶ãƒ¼**: ãƒ­ã‚°ã‚¤ãƒ³ç¦æ­¢æ©Ÿèƒ½ï¼ˆå®Ÿè£…ã‚ã‚Šï¼‰
5. **IPã‚¢ãƒ‰ãƒ¬ã‚¹åˆ¶é™**: æ¥ç¶šå…ƒIPç®¡ç†
6. **SYSOPç›£è¦–**: å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç›£è¦–å¯èƒ½

#### 4.3.2 Pythonç‰ˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

1. **ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œåˆ¶é™**: 3å›å¤±æ•—ã§æ¥ç¶šåˆ‡æ–­ âœ…
2. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥**: bcryptã§ä¿å­˜ âœ…
3. **ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´**: `last_login`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§è¨˜éŒ² âœ…
4. **BANãƒ¦ãƒ¼ã‚¶ãƒ¼**: `is_banned`ãƒ•ãƒ©ã‚°ã§å®Ÿè£… âœ…
5. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: åŸºæœ¬çš„ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ âœ…
6. **SYSOPç›£è¦–**: æœªå®Ÿè£… âŒ

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚®ãƒ£ãƒƒãƒ—**:
- SYSOPç›£è¦–æ©Ÿèƒ½ãªã—
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒã‚¤ã‚¸ãƒ£ãƒƒã‚¯å¯¾ç­–ãªã—
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãªã—ï¼ˆDoSè„†å¼±æ€§ï¼‰
- è©³ç´°ãªç›£æŸ»ãƒ­ã‚°ãªã—

### 4.4 æ¨©é™ç®¡ç†ã®å®Ÿè£…æ¨å¥¨

#### 4.4.1 æ©Ÿèƒ½åˆ¥æ¨©é™ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

```sql
CREATE TABLE command_permissions (
    command_key VARCHAR(20) PRIMARY KEY,  -- 'MAIL', 'CHAT', 'TELEGRAM', etc.
    min_level INT NOT NULL DEFAULT 0,     -- æœ€å°å®Ÿè¡Œãƒ¬ãƒ™ãƒ«
    description VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE
);

-- åˆæœŸãƒ‡ãƒ¼ã‚¿ä¾‹
INSERT INTO command_permissions VALUES
('MAIL', 1, 'Mail system access', TRUE),
('CHAT', 0, 'Chat room access', TRUE),
('TELEGRAM', 1, 'Telegram messaging', TRUE),
('SYSOP', 9, 'SYSOP commands', TRUE),
('PROFILE', 1, 'Profile editing', TRUE);
```

#### 4.4.2 æ¨©é™ãƒã‚§ãƒƒã‚¯é–¢æ•°ã®å®Ÿè£…

```python
async def check_command_permission(self, command_key: str) -> bool:
    """ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ¨©é™ã‚’ãƒã‚§ãƒƒã‚¯"""
    permission = await self.get_command_permission(command_key)

    if not permission or not permission.is_active:
        return False

    if self.user_level < permission.min_level:
        await self.send_line(f"Access denied. Required level: {permission.min_level}")
        return False

    return True

# ä½¿ç”¨ä¾‹
async def read_mail(self):
    if not await self.check_command_permission('MAIL'):
        return
    # ãƒ¡ãƒ¼ãƒ«å‡¦ç†...
```

---

## ç¬¬5éƒ¨: å®Ÿè£…ã‚®ãƒ£ãƒƒãƒ—åˆ†æ

### 5.1 æœªå®Ÿè£…æ©Ÿèƒ½ã®è©³ç´°ãƒªã‚¹ãƒˆ

#### 5.1.1 ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼ˆé«˜å„ªå…ˆåº¦ï¼‰

##### 1. ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (M)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- å—ä¿¡ãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆè¡¨ç¤º
- é€ä¿¡ãƒ¡ãƒ¼ãƒ«ãƒªã‚¹ãƒˆè¡¨ç¤º
- å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«èª­è¾¼
- ãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰
- ãƒã‚¤ãƒŠãƒªãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«æ·»ä»˜ï¼‰
- ãƒ¡ãƒ¼ãƒ«å‰Šé™¤ï¼ˆè‡ªåˆ†ã®ãƒ¡ãƒ¼ãƒ«ã®ã¿ï¼‰
- æ—¢èª­/æœªèª­ç®¡ç†

**å®Ÿè£…ç¯„å›²**:
- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«: æº–å‚™æ¸ˆã¿ï¼ˆ`Mail`ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼: éƒ¨åˆ†å®Ÿè£…
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ³ãƒ‰ãƒ©: ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã¿

**æŠ€è¡“çš„èª²é¡Œ**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ·»ä»˜ï¼ˆãƒã‚¤ãƒŠãƒªãƒ¡ãƒ¼ãƒ«ï¼‰ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- ãƒ¡ãƒ¼ãƒ«å‰Šé™¤æ™‚ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- å¤§é‡ãƒ¡ãƒ¼ãƒ«æ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 25-30æ™‚é–“

##### 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² (A)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- IDå…¥åŠ›ï¼ˆè‡ªå‹•ç”Ÿæˆ/æ‰‹å…¥åŠ›ï¼‰
- é‡è¤‡ãƒã‚§ãƒƒã‚¯
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ï¼ˆåå‰ã€ä½æ‰€ã€é›»è©±ã€è¶£å‘³ã€èª•ç”Ÿæ—¥ã€ãƒãƒ³ãƒ‰ãƒ«ã€ã‚³ãƒ¡ãƒ³ãƒˆã€Emailï¼‰
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ
- SYSOPæ‰¿èªå¾…ã¡çŠ¶æ…‹
- SYSOPé€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡

**å®Ÿè£…ç¯„å›²**:
- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«: å®Œæˆ
- ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼: `create_user()`å®Ÿè£…æ¸ˆã¿
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ³ãƒ‰ãƒ©: æœªå®Ÿè£…

**æŠ€è¡“çš„èª²é¡Œ**:
- IDè‡ªå‹•ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆEmailå½¢å¼ç­‰ï¼‰
- SYSOPæ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 15-20æ™‚é–“

##### 3. SYSOPæ©Ÿèƒ½ (@)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- Applyæ‰¿èªå‡¦ç†
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒªãƒ­ãƒ¼ãƒ‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«å¤‰æ›´
- ãƒãƒ£ãƒãƒ«ã‚­ãƒƒã‚¯ï¼ˆå¼·åˆ¶åˆ‡æ–­ï¼‰
- ã‚·ã‚¹ãƒ†ãƒ çµ±è¨ˆè¡¨ç¤º

**å®Ÿè£…ç¯„å›²**:
- å®Œå…¨æœªå®Ÿè£…

**æŠ€è¡“çš„èª²é¡Œ**:
- ç®¡ç†è€…å°‚ç”¨ã‚³ãƒãƒ³ãƒ‰ä½“ç³»
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚­ãƒƒã‚¯ï¼‰
- è¨­å®šã®å‹•çš„ãƒªãƒ­ãƒ¼ãƒ‰

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 20-25æ™‚é–“

##### 4. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ (O)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¹ãƒˆè¡¨ç¤º
- å€‹åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤º
- è‡ªåˆ†ã®æƒ…å ±ç·¨é›†ï¼ˆä½æ‰€ã€åå‰ã€é›»è©±ã€è¶£å‘³ã€èª•ç”Ÿæ—¥ã€ã‚³ãƒ¡ãƒ³ãƒˆã€Emailï¼‰

**å®Ÿè£…ç¯„å›²**:
- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«: å®Œæˆï¼ˆ`User`ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼: `get_user()`å®Ÿè£…æ¸ˆã¿
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ³ãƒ‰ãƒ©: æœªå®Ÿè£…

**æŠ€è¡“çš„èª²é¡Œ**:
- ç·¨é›†UIãƒ•ãƒ­ãƒ¼
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 12-15æ™‚é–“

#### 5.1.2 é‡è¦ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰

##### 5. Installè¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ (I)

**Delphiç‰ˆã®æ©Ÿèƒ½** (12ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰):
1. ENTRY: æ²ç¤ºæ¿è³¼èª­è¨­å®š
2. P: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
3. R: æœ€çµ‚èª­äº†æ—¥æ™‚è¨­å®š
4. H: ãƒãƒ³ãƒ‰ãƒ«åè¨­å®š
5. M: ãƒ¡ãƒ¢è¨­å®š
6. A: ãƒ­ã‚°ã‚¤ãƒ³é€šçŸ¥è¨­å®š
7. N: ãƒ‹ãƒ¥ãƒ¼ã‚¹è³¼èª­è¨­å®š
8. D: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
9. E: ECHOè¨­å®š
10. Y: èª­è¾¼ã‚¹ã‚­ãƒƒãƒ—è¨­å®š
11. S: ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±è¡¨ç¤º
12. L: ãƒ­ã‚°è¡¨ç¤º

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 25-30æ™‚é–“

##### 6. Whoæ©Ÿèƒ½æ‹¡å¼µ (W)

**ç¾åœ¨**: è‡ªåˆ†ã®ã¿è¡¨ç¤º
**å¿…è¦**: å…¨ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º

**å®Ÿè£…è¦ä»¶**:
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å¼·åŒ–ï¼ˆTelnetServerã®`handlers`è¾æ›¸æ´»ç”¨ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã®å–å¾—
- Whereæƒ…å ±ï¼ˆç¾åœ¨åœ°ï¼‰ã®è¿½è·¡

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 8-10æ™‚é–“

##### 7. Killå‰Šé™¤æ©Ÿèƒ½ (K)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤ï¼ˆè‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼‰
- SYSOPæ¨©é™ã§å…¨å‰Šé™¤å¯èƒ½
- å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

**å®Ÿè£…ç¯„å›²**:
- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«: `deleted`ãƒ•ãƒ©ã‚°å®Ÿè£…æ¸ˆã¿
- ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼: `delete_message()`å®Ÿè£…æ¸ˆã¿
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ³ãƒ‰ãƒ©: æœªå®Ÿè£…

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 5-8æ™‚é–“

##### 8. Logè¡¨ç¤ºæ©Ÿèƒ½ (L)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- è‡ªåˆ†ã®ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´è¡¨ç¤º
- SYSOPæ¨©é™ã§å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°è¡¨ç¤º

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 8-10æ™‚é–“

##### 9. ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ ã®å®Ÿè£…

**å¯¾è±¡ã‚³ãƒãƒ³ãƒ‰**:
- R (Read): R/I/S/L/F/#/? ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰
- E (Enter): M/B/W/R ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 15-20æ™‚é–“

#### 5.1.3 æ‹¡å¼µæ©Ÿèƒ½ï¼ˆä½å„ªå…ˆåº¦ï¼‰

##### 10. Telegramé›»å ±ã‚·ã‚¹ãƒ†ãƒ  (T)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- ç‰¹å®šãƒãƒ£ãƒãƒ«ã¸é›»å ±é€ä¿¡
- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ä¸€æ–‰é€ä¿¡ (CH=100)
- ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é€šçŸ¥ (CH=101)
- éåŒæœŸå—ä¿¡ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ä¸­ã«é€šçŸ¥ï¼‰

**å®Ÿè£…è¦ä»¶**:
- WebSocketé¡ä¼¼ã®ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥æ©Ÿæ§‹
- ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“é€šä¿¡

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 20-25æ™‚é–“

##### 11. ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ (F)

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ²ç¤ºæ¿é¸æŠ
- ãƒ—ãƒ­ãƒˆã‚³ãƒ«é¸æŠ (FTP/XMODEM/YMODEM/ZMODEM/MLINK)
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆè¡¨ç¤º
- ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢

**å®Ÿè£…è¦ä»¶**:
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†
- ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€ãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
- ã‚¦ã‚¤ãƒ«ã‚¹ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 40-50æ™‚é–“

##### 12. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

**Delphiç‰ˆã®æ©Ÿèƒ½**:
- DLLãƒ­ãƒ¼ãƒ‰/ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰
- ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒƒã‚¯ (OnLogin, OnLogout, OnGoodbyeç­‰)
- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰è¿½åŠ 

**å®Ÿè£…è¦ä»¶**:
- Pythonãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 35-40æ™‚é–“

##### 13. ãã®ä»–ã®æœªå®Ÿè£…ã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | æ©Ÿèƒ½ | å·¥æ•° |
|---------|------|------|
| S | Sysop Call | 3-5æ™‚é–“ |
| X | IP Addressè¡¨ç¤º | 2-3æ™‚é–“ |
| P | Free Post | 5-8æ™‚é–“ |
| % | Change Mode | 5-8æ™‚é–“ |
| ! | Gameèµ·å‹• | 8-10æ™‚é–“ |

### 5.2 å„æ©Ÿèƒ½ã®é‡è¦åº¦è©•ä¾¡

#### 5.2.1 ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆè©•ä¾¡

| æ©Ÿèƒ½ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ | å®Ÿè£…ã‚³ã‚¹ãƒˆ | å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢ | é †ä½ |
|-----|-----------|-----------|------------|-----|
| ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  | é«˜ (å¿…é ˆ) | ä¸­ (25-30h) | **9/10** | 1 |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² | é«˜ (å¿…é ˆ) | ä½ (15-20h) | **9/10** | 2 |
| SYSOPæ©Ÿèƒ½ | é«˜ (é‹ç”¨å¿…é ˆ) | ä¸­ (20-25h) | **8/10** | 3 |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« | ä¸­ | ä½ (12-15h) | **7/10** | 4 |
| Installè¨­å®š | ä¸­ | ä¸­ (25-30h) | **6/10** | 5 |
| Whoæ‹¡å¼µ | ä¸­ | ä½ (8-10h) | **6/10** | 6 |
| ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ä¸­ | ä¸­ (15-20h) | **5/10** | 7 |
| Killå‰Šé™¤ | ä¸­ | ä½ (5-8h) | **5/10** | 8 |
| Logè¡¨ç¤º | ä½ | ä½ (8-10h) | **4/10** | 9 |
| Telegram | ä½ | ä¸­ (20-25h) | **3/10** | 10 |
| ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ | ä½ | é«˜ (40-50h) | **2/10** | 11 |
| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | ä½ | é«˜ (35-40h) | **2/10** | 12 |

**è©•ä¾¡åŸºæº–**:
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤**: é«˜=BBSã®åŸºæœ¬æ©Ÿèƒ½ã€ä¸­=åˆ©ä¾¿æ€§å‘ä¸Šã€ä½=ä»˜åŠ æ©Ÿèƒ½
- **å®Ÿè£…ã‚³ã‚¹ãƒˆ**: é«˜=30hä»¥ä¸Šã€ä¸­=15-30hã€ä½=15hæœªæº€
- **å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢**: (ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤Ã—2 + å®Ÿè£…å®¹æ˜“æ€§) / 3

### 5.3 å®Ÿè£…ã®æŠ€è¡“çš„èª²é¡Œ

#### 5.3.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¬ãƒ™ãƒ«ã®èª²é¡Œ

##### èª²é¡Œ1: ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“é€šä¿¡

**å•é¡Œ**:
- Whoæ©Ÿèƒ½ã€Telegramã€ãƒãƒ£ãƒƒãƒˆæ‹¡å¼µã§å¿…è¦
- ç¾åœ¨ã®`TelnetServer.handlers`è¾æ›¸ã¯åŸºæœ¬çš„ãªç®¡ç†ã®ã¿

**è§£æ±ºç­–**:
1. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³1**: Redis Pub/Subãƒ‘ã‚¿ãƒ¼ãƒ³
   ```python
   # å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãƒãƒ£ãƒãƒ«ã‚’Subscribe
   redis.subscribe(f"session:{user_id}")

   # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
   redis.publish(f"session:{target_user_id}", message)
   ```

2. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³2**: asyncio.Queueãƒ™ãƒ¼ã‚¹
   ```python
   # TelnetServerå†…ã§ç®¡ç†
   self.message_queues: Dict[str, asyncio.Queue] = {}

   # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
   await self.message_queues[target_user_id].put(message)
   ```

**æ¨å¥¨**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³2ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã€ä¾å­˜ãªã—ï¼‰

##### èª²é¡Œ2: ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€ãƒ—ãƒ­ãƒˆã‚³ãƒ«

**å•é¡Œ**:
- Telnetã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§ãƒã‚¤ãƒŠãƒªè»¢é€
- XMODEM/YMODEM/ZMODEM ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿè£…

**è§£æ±ºç­–**:
1. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³1**: æ—¢å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ´»ç”¨
   ```python
   from xmodem import XMODEM
   # ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç¢ºèªå¿…è¦
   ```

2. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³2**: HTTP/FTPãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´
   ```python
   # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«URLæä¾›
   await self.send_line(f"Download: http://host/files/{file_id}")
   ```

**æ¨å¥¨**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³2ï¼ˆãƒ¢ãƒ€ãƒ³ã€ã‚»ã‚­ãƒ¥ã‚¢ï¼‰

##### èª²é¡Œ3: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼ˆTelegramï¼‰

**å•é¡Œ**:
- ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ä¸­ã«éåŒæœŸã§é€šçŸ¥å—ä¿¡
- Telnetãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®åˆ¶ç´„ï¼ˆåŒæ–¹å‘æ€§ï¼‰

**è§£æ±ºç­–**:
```python
async def notification_listener(self):
    """ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§é€šçŸ¥ã‚’ãƒªãƒƒã‚¹ãƒ³"""
    while not self.terminated:
        try:
            notification = await asyncio.wait_for(
                self.notification_queue.get(),
                timeout=1.0
            )
            await self.send(f"\r\n*** TELEGRAM: {notification} ***\r\n")
            await self.send(self.current_prompt)  # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†è¡¨ç¤º
        except asyncio.TimeoutError:
            continue

# main_loop()ã¨ä¸¦è¡Œå®Ÿè¡Œ
async def handle(self):
    # ...
    tasks = [
        asyncio.create_task(self.main_loop()),
        asyncio.create_task(self.notification_listener())
    ]
    await asyncio.gather(*tasks)
```

#### 5.3.2 ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®èª²é¡Œ

##### èª²é¡Œ4: ãƒ¡ãƒ¼ãƒ«å‰Šé™¤ã¨å‚ç…§æ•´åˆæ€§

**å•é¡Œ**:
- ãƒ¡ãƒ¼ãƒ«å‰Šé™¤æ™‚ã€é€ä¿¡è€…ã¨å—ä¿¡è€…ã®åŒæ–¹å‘é–¢ä¿‚
- æ—¢èª­/æœªèª­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç®¡ç†

**è§£æ±ºç­–**:
```python
async def delete_mail(self, mail_id: int, deleting_user_id: str):
    """è«–ç†å‰Šé™¤: deleted_by_senderã¾ãŸã¯deleted_by_recipientãƒ•ãƒ©ã‚°ã‚’è¨­å®š"""
    mail = await self.get_mail(mail_id)

    if mail.from_id == deleting_user_id:
        mail.deleted_by_sender = True
    elif mail.to_id == deleting_user_id:
        mail.deleted_by_recipient = True

    # åŒæ–¹ãŒå‰Šé™¤ã—ãŸå ´åˆã®ã¿ç‰©ç†å‰Šé™¤
    if mail.deleted_by_sender and mail.deleted_by_recipient:
        await self.db.delete(mail)
    else:
        await self.db.commit()
```

##### èª²é¡Œ5: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**å•é¡Œ**:
- SYSOPæ‰¿èªå¾…ã¡çŠ¶æ…‹ã®ç®¡ç†
- æ‰¿èª/æ‹’å¦ã®é€šçŸ¥

**è§£æ±ºç­–**:
```python
# Userãƒ¢ãƒ‡ãƒ«æ‹¡å¼µ
class User:
    # ...
    registration_status: str  # 'pending', 'approved', 'rejected'
    approved_by: Optional[str]  # SYSOP ID
    approved_at: Optional[datetime]

# SYSOPæ‰¿èªå‡¦ç†
async def approve_user(sysop_id: str, target_user_id: str):
    user = await self.get_user(target_user_id)
    user.registration_status = 'approved'
    user.approved_by = sysop_id
    user.approved_at = datetime.now()
    user.level = 1  # Guestã‹ã‚‰ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸

    # é€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡
    await self.send_system_mail(
        to_id=target_user_id,
        title="Registration Approved",
        body="Your registration has been approved by SYSOP."
    )
```

### 5.4 ä¾å­˜é–¢ä¿‚ã®åˆ†æ

#### 5.4.1 æ©Ÿèƒ½é–“ä¾å­˜é–¢ä¿‚å›³

```mermaid
graph TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²] --> B[ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«]
    A --> C[ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ]
    C --> D[SYSOPæ©Ÿèƒ½]
    B --> D
    E[Whoæ‹¡å¼µ] --> F[ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å¼·åŒ–]
    G[Telegram] --> F
    H[ãƒãƒ£ãƒƒãƒˆæ‹¡å¼µ] --> F
    D --> I[Installè¨­å®š]
    I --> B
    J[ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼] --> K[Readæ‹¡å¼µ]
    J --> L[Enteræ‹¡å¼µ]
    L --> C
    D --> M[Killå‰Šé™¤]
    D --> N[Logè¡¨ç¤º]
```

#### 5.4.2 å®Ÿè£…é †åºã®æ¨å¥¨

**ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤å¼·åŒ–** (ä¾å­˜ãªã—ã€ä¸¦è¡Œå®Ÿè£…å¯èƒ½)
1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å¼·åŒ–
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
3. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«åŸºæœ¬æ©Ÿèƒ½

**ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ã‚¢æ©Ÿèƒ½** (ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†å¾Œ)
4. ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã«ä¾å­˜ï¼‰
5. SYSOPæ©Ÿèƒ½ï¼ˆãƒ¡ãƒ¼ãƒ«ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«ä¾å­˜ï¼‰
6. Whoæ‹¡å¼µï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«ä¾å­˜ï¼‰

**ãƒ•ã‚§ãƒ¼ã‚º3: æ‹¡å¼µæ©Ÿèƒ½** (ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†å¾Œ)
7. Installè¨­å®šï¼ˆSYSOPã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«ä¾å­˜ï¼‰
8. ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ 
9. Killå‰Šé™¤ï¼ˆSYSOPæ©Ÿèƒ½ã«ä¾å­˜ï¼‰
10. Logè¡¨ç¤ºï¼ˆSYSOPæ©Ÿèƒ½ã«ä¾å­˜ï¼‰

**ãƒ•ã‚§ãƒ¼ã‚º4: é«˜åº¦ãªæ©Ÿèƒ½** (å…¨ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†å¾Œ)
11. Telegramï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«ä¾å­˜ï¼‰
12. ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½
13. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

---

## ç¬¬6éƒ¨: å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### 6.1 ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤å¼·åŒ–ï¼ˆ3-4é€±é–“ï¼‰

**ç›®æ¨™**: BBSã®åŸºæœ¬æ©Ÿèƒ½ã‚’å®Œæˆã•ã›ã‚‹

#### ã‚¿ã‚¹ã‚¯1.1: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å¼·åŒ– (8-10æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
class TelnetServer:
    def __init__(self):
        self.handlers: Dict[str, TelnetHandler] = {}
        self.message_queues: Dict[str, asyncio.Queue] = {}
        self.session_metadata: Dict[str, SessionInfo] = {}

    def get_online_users(self) -> List[UserSessionInfo]:
        """å…¨ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—"""
        return [
            {
                'user_id': handler.user_id,
                'handle_name': handler.handle_name,
                'login_time': meta.login_time,
                'where': meta.current_location,
                'ip_address': meta.ip_address
            }
            for client_id, handler in self.handlers.items()
            if handler.authenticated
            for meta in [self.session_metadata[client_id]]
        ]

    async def send_to_user(self, target_user_id: str, message: str):
        """ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡"""
        for handler in self.handlers.values():
            if handler.user_id == target_user_id:
                await handler.send_notification(message)
                break
```

**æˆæœç‰©**:
- æ‹¡å¼µã•ã‚ŒãŸTelnetServerã‚¯ãƒ©ã‚¹
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“é€šä¿¡åŸºç›¤

#### ã‚¿ã‚¹ã‚¯1.2: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ (15-20æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def apply(self):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹"""
    await self.send_line("=== User Registration ===")

    # IDå…¥åŠ›
    await self.send_line("User ID (leave blank for auto-generate): ")
    user_id_input = await self.receive_line()

    if not user_id_input:
        user_id = await self.generate_user_id()
    else:
        # é‡è¤‡ãƒã‚§ãƒƒã‚¯
        if await self.user_service.get_user(user_id_input):
            await self.send_line("User ID already exists.")
            return
        user_id = user_id_input

    # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›
    profile = {}
    profile['name'] = await self.prompt("Name (required): ")
    profile['address'] = await self.prompt("Address (required): ")
    profile['tel'] = await self.prompt("Telephone: ")
    profile['hobby'] = await self.prompt("Hobby: ")
    profile['birthday'] = await self.prompt("Birthday (YYYY-MM-DD): ")
    profile['handle'] = await self.prompt("Handle name: ")
    profile['comment'] = await self.prompt("Comment: ")
    profile['email'] = await self.prompt("E-mail: ")

    # ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ
    password = self.generate_password()
    await self.send_line(f"Your password: {password}")
    await self.send_line("Please write it down!")

    # ç¢ºèª
    if not await self.yes_no_input("Register with this information?"):
        await self.send_line("Registration cancelled.")
        return

    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
    await self.user_service.create_user(
        user_id=user_id,
        password=password,
        level=0,  # æ‰¿èªå¾…ã¡=Guest
        registration_status='pending',
        **profile
    )

    # SYSOPé€šçŸ¥
    await self.notify_sysop_new_registration(user_id, profile)

    await self.send_line("Registration complete. Waiting for SYSOP approval...")
```

**æˆæœç‰©**:
- `apply()`ã‚³ãƒãƒ³ãƒ‰ãƒãƒ³ãƒ‰ãƒ©
- IDè‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½
- SYSOPé€šçŸ¥æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯1.3: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ (12-15æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def profile(self):
    """ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ¡ãƒ‹ãƒ¥ãƒ¼"""
    while True:
        await self.send_line("\n=== Profile ===")
        await self.send_line("[L]ist users  [I]ndividual  [E]dit  [0] Exit")
        cmd = await self.receive_line()

        if cmd.upper() == 'L':
            await self.show_user_list()
        elif cmd.upper() == 'I':
            await self.show_individual_profile()
        elif cmd.upper() == 'E':
            await self.edit_my_profile()
        elif cmd == '0':
            break

async def edit_my_profile(self):
    """è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†"""
    user = await self.user_service.get_user(self.user_id)

    await self.send_line("\n=== Edit Profile ===")
    await self.send_line("[1] Address  [2] Name  [3] Tel  [4] Hobby")
    await self.send_line("[5] Birthday [6] Comment [7] E-mail [0] Exit")

    cmd = await self.receive_line()

    if cmd == '1':
        new_value = await self.prompt("New address: ")
        user.address = new_value
    # ... (ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚‚åŒæ§˜)

    await self.user_service.update_user(user)
    await self.send_line("Profile updated.")
```

**æˆæœç‰©**:
- `profile()`ã‚³ãƒãƒ³ãƒ‰ãƒãƒ³ãƒ‰ãƒ©
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºæ©Ÿèƒ½
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯1.4: Whoæ©Ÿèƒ½æ‹¡å¼µ (8-10æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def who_online(self):
    """ãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º"""
    online_users = self.server.get_online_users()

    await self.send_line("\n=== Online Users ===")
    await self.send_line(f"{'ID':<10} {'Handle':<15} {'Where':<10} {'Login Time':<20}")
    await self.send_line("-" * 55)

    for user in online_users:
        await self.send_line(
            f"{user['user_id']:<10} "
            f"{user['handle_name']:<15} "
            f"{user['where']:<10} "
            f"{user['login_time'].strftime('%Y-%m-%d %H:%M:%S'):<20}"
        )

    await self.send_line(f"\nTotal: {len(online_users)} user(s)")
```

**æˆæœç‰©**:
- æ‹¡å¼µã•ã‚ŒãŸ`who_online()`
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±è¡¨ç¤º

**ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†åŸºæº–**:
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²å¯èƒ½
- âœ… ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†å¯èƒ½
- âœ… Whoæ©Ÿèƒ½ã§å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤º
- âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å¼·åŒ–å®Œäº†

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 60-80æ™‚é–“

---

### 6.2 ãƒ•ã‚§ãƒ¼ã‚º2: æ©Ÿèƒ½æ‹¡å……ï¼ˆ4-6é€±é–“ï¼‰

**ç›®æ¨™**: ç®¡ç†æ©Ÿèƒ½ã¨é«˜åº¦ãªæ©Ÿèƒ½ã‚’å®Ÿè£…

#### ã‚¿ã‚¹ã‚¯2.1: ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (25-30æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def read_mail(self):
    """ãƒ¡ãƒ¼ãƒ«æ©Ÿèƒ½ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼"""
    while True:
        await self.send_line("\n=== Mail ===")
        await self.send_line("[R]eceived  [S]ent  [W]rite  [0] Exit")
        cmd = await self.receive_line()

        if cmd.upper() == 'R':
            await self.show_received_mail()
        elif cmd.upper() == 'S':
            await self.show_sent_mail()
        elif cmd.upper() == 'W':
            await self.write_mail()
        elif cmd == '0':
            break

async def show_received_mail(self):
    """å—ä¿¡ãƒ¡ãƒ¼ãƒ«ä¸€è¦§ã¨èª­è¾¼"""
    mails = await self.mail_service.get_received_mails(self.user_id)

    # ãƒªã‚¹ãƒˆè¡¨ç¤º
    await self.send_line("\n=== Received Mail ===")
    await self.send_line(f"{'No':<5} {'From':<10} {'Title':<30} {'Date':<20} {'Status':<10}")
    for i, mail in enumerate(mails, 1):
        status = "Read" if mail.status == 'read' else "New"
        await self.send_line(
            f"{i:<5} {mail.from_id:<10} {mail.title:<30} "
            f"{mail.created_at.strftime('%Y-%m-%d %H:%M'):<20} {status:<10}"
        )

    # å€‹åˆ¥èª­è¾¼
    mail_no = await self.prompt("\nMail number to read (0 to exit): ")
    if mail_no == '0':
        return

    mail = mails[int(mail_no) - 1]
    await self.display_mail(mail)

    # å‰Šé™¤ç¢ºèª
    if await self.yes_no_input("Delete this mail?"):
        await self.mail_service.delete_mail(mail.id, self.user_id)

async def write_mail(self):
    """ãƒ¡ãƒ¼ãƒ«ä½œæˆ"""
    to_id = await self.prompt("To (User ID): ")

    # ãƒ¦ãƒ¼ã‚¶ãƒ¼å­˜åœ¨ç¢ºèª
    if not await self.user_service.get_user(to_id):
        await self.send_line("User not found.")
        return

    title = await self.prompt("Title: ")

    await self.send_line("Body (end with '.' on a line by itself):")
    body_lines = []
    while True:
        line = await self.receive_line()
        if line == ".":
            break
        body_lines.append(line)
    body = "\n".join(body_lines)

    # é€ä¿¡
    await self.mail_service.send_mail(
        from_id=self.user_id,
        to_id=to_id,
        title=title,
        body=body
    )

    await self.send_line("Mail sent successfully.")
```

**æˆæœç‰©**:
- å®Œå…¨ãªãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
- å—ä¿¡/é€ä¿¡ãƒ¡ãƒ¼ãƒ«ç®¡ç†
- ãƒ¡ãƒ¼ãƒ«å‰Šé™¤æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯2.2: SYSOPæ©Ÿèƒ½ (20-25æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def sysop(self):
    """SYSOPå°‚ç”¨ã‚³ãƒãƒ³ãƒ‰"""
    if self.user_level < 9:
        await self.send_line("Access denied. SYSOP only.")
        return

    while True:
        await self.send_line("\n=== SYSOP Menu ===")
        await self.send_line("[A]pprove users  [L]evel change  [K]ick user")
        await self.send_line("[R]eload config  [S]tats  [Q]uit")
        cmd = await self.receive_line()

        if cmd.upper() == 'A':
            await self.approve_users()
        elif cmd.upper() == 'L':
            await self.change_user_level()
        elif cmd.upper() == 'K':
            await self.kick_user()
        elif cmd.upper() == 'R':
            await self.reload_config()
        elif cmd.upper() == 'S':
            await self.show_stats()
        elif cmd.upper() == 'Q':
            break

async def approve_users(self):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª"""
    pending_users = await self.user_service.get_pending_users()

    for user in pending_users:
        await self.send_line(f"\nUser: {user.user_id}")
        await self.send_line(f"Name: {user.name}")
        await self.send_line(f"Address: {user.address}")

        if await self.yes_no_input("Approve?"):
            await self.user_service.approve_user(user.user_id, self.user_id)
            await self.send_line("Approved.")
        else:
            if await self.yes_no_input("Reject?"):
                await self.user_service.reject_user(user.user_id, self.user_id)
                await self.send_line("Rejected.")

async def kick_user(self):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼å¼·åˆ¶åˆ‡æ–­"""
    online_users = self.server.get_online_users()

    # ãƒªã‚¹ãƒˆè¡¨ç¤º
    for i, user in enumerate(online_users, 1):
        await self.send_line(f"{i}. {user['user_id']} ({user['handle_name']})")

    user_no = await self.prompt("User number to kick: ")
    target_user = online_users[int(user_no) - 1]

    if await self.yes_no_input(f"Kick {target_user['user_id']}?"):
        await self.server.kick_user(target_user['user_id'])
        await self.send_line("User kicked.")
```

**æˆæœç‰©**:
- SYSOPå°‚ç”¨ã‚³ãƒãƒ³ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª/æ‹’å¦æ©Ÿèƒ½
- ãƒ¬ãƒ™ãƒ«å¤‰æ›´æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚­ãƒƒã‚¯æ©Ÿèƒ½
- è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯2.3: Installè¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ (25-30æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def install(self):
    """è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼"""
    while True:
        await self.send_line("\n=== Install ===")
        await self.send_line("[P]assword  [H]andle  [E]NTRY  [N]ews")
        await self.send_line("[A]uto-login  [0] Exit")
        cmd = await self.receive_line()

        if cmd.upper() == 'P':
            await self.change_password()
        elif cmd.upper() == 'H':
            await self.change_handle()
        elif cmd.upper() == 'E':
            await self.board_subscription()
        # ... ãã®ä»–ã®è¨­å®š
        elif cmd == '0':
            break

async def board_subscription(self):
    """æ²ç¤ºæ¿è³¼èª­è¨­å®š"""
    boards = await self.board_service.get_boards()
    subscriptions = await self.user_service.get_subscriptions(self.user_id)

    await self.send_line("\n=== Board Subscription ===")
    for board in boards:
        subscribed = board.board_id in subscriptions
        mark = "[*]" if subscribed else "[ ]"
        await self.send_line(f"{mark} {board.board_id}. {board.name}")

    await self.send_line("\n[A]dd  [D]elete  [S]ubscribe all  [R]eset  [0] Exit")
    cmd = await self.receive_line()

    if cmd.upper() == 'A':
        board_no = await self.prompt("Board number to add: ")
        await self.user_service.add_subscription(self.user_id, int(board_no))
    # ... ãã®ä»–ã®æ“ä½œ
```

**æˆæœç‰©**:
- Installè¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
- ãƒãƒ³ãƒ‰ãƒ«åå¤‰æ›´
- æ²ç¤ºæ¿è³¼èª­ç®¡ç†
- ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨­å®š

#### ã‚¿ã‚¹ã‚¯2.4: ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹é€ å®Ÿè£… (15-20æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def read_board(self):
    """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸èª­è¾¼ï¼ˆã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç‰ˆï¼‰"""
    # ... æ²ç¤ºæ¿é¸æŠã¾ã§åŒã˜ ...

    while True:
        await self.send_line("\n=== Read Menu ===")
        await self.send_line("[R]ead sequential  [I]ndividual  [L]ist")
        await self.send_line("[S]earch  [#] Status  [0] Exit")
        cmd = await self.receive_line()

        if cmd.upper() == 'R':
            await self.sequential_read(board_id)
        elif cmd.upper() == 'I':
            await self.individual_read(board_id)
        elif cmd.upper() == 'L':
            await self.list_messages(board_id)
        elif cmd.upper() == 'S':
            await self.search_messages(board_id)
        elif cmd == '#':
            await self.board_status(board_id)
        elif cmd == '0':
            break
```

**æˆæœç‰©**:
- Read/Enterã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- é †æ¬¡èª­è¾¼æ©Ÿèƒ½
- æ¤œç´¢æ©Ÿèƒ½
- æ²ç¤ºæ¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º

**ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†åŸºæº–**:
- âœ… ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒ
- âœ… SYSOPæ©Ÿèƒ½åˆ©ç”¨å¯èƒ½
- âœ… Installè¨­å®šå®Œå‚™
- âœ… ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼å®Ÿè£…

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 80-100æ™‚é–“

---

### 6.3 ãƒ•ã‚§ãƒ¼ã‚º3: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆ6-8é€±é–“ï¼‰

**ç›®æ¨™**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã¨æ‹¡å¼µæ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯3.1: Telegramé›»å ±ã‚·ã‚¹ãƒ†ãƒ  (20-25æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def telegram(self):
    """é›»å ±é€ä¿¡"""
    await self.send_line("Send to (CH number or user ID): ")
    target = await self.receive_line()

    if target == '100':
        # å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é€ä¿¡
        await self.send_broadcast_telegram()
    elif target.isdigit():
        # ç‰¹å®šãƒãƒ£ãƒãƒ«ã¸é€ä¿¡
        await self.send_to_channel(int(target))
    else:
        # ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é€ä¿¡
        await self.send_to_user_telegram(target)

async def send_to_user_telegram(self, target_user_id: str):
    """ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸é›»å ±é€ä¿¡"""
    message = await self.prompt("Message: ")

    # ã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§é€ä¿¡
    await self.server.send_telegram(
        from_user=self.user_id,
        to_user=target_user_id,
        message=message
    )

    await self.send_line("Telegram sent.")

# TelnetHandlerã«é€šçŸ¥ãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
async def notification_listener(self):
    """ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§é€šçŸ¥å—ä¿¡"""
    while not self.terminated:
        try:
            notification = await asyncio.wait_for(
                self.notification_queue.get(),
                timeout=1.0
            )
            # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å£Šã•ãšã«é€šçŸ¥è¡¨ç¤º
            await self.send(f"\r\n*** TELEGRAM from {notification.from_user}: {notification.message} ***\r\n")
            await self.send(self.current_prompt)
        except asyncio.TimeoutError:
            continue
```

**æˆæœç‰©**:
- é›»å ±é€ä¿¡æ©Ÿèƒ½
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥å—ä¿¡
- ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯3.2: ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½æ‹¡å¼µ (15-20æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def chat(self):
    """ãƒãƒ£ãƒƒãƒˆï¼ˆãƒãƒ«ãƒãƒ«ãƒ¼ãƒ å¯¾å¿œï¼‰"""
    # ãƒ«ãƒ¼ãƒ ä¸€è¦§è¡¨ç¤º
    rooms = self.server.get_chat_rooms()

    await self.send_line("\n=== Chat Rooms ===")
    for room_id, room in rooms.items():
        user_count = len(room.users)
        await self.send_line(f"[{room_id}] {room.name} ({user_count} users)")

    await self.send_line("\n[N]ew room  [J]oin  [0] Exit")
    cmd = await self.receive_line()

    if cmd.upper() == 'N':
        room_name = await self.prompt("Room name: ")
        room_id = await self.server.create_chat_room(room_name, self.user_id)
        await self.join_chat_room(room_id)
    elif cmd.upper() == 'J':
        room_id = await self.prompt("Room number: ")
        await self.join_chat_room(int(room_id))

async def join_chat_room(self, room_id: int):
    """ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ å‚åŠ """
    room = self.server.get_chat_room(room_id)
    await room.join(self)

    # ãƒãƒ£ãƒƒãƒˆå†…ã‚³ãƒãƒ³ãƒ‰
    while True:
        message = await self.receive_line()

        if message in ['//', '^^']:
            await room.leave(self)
            break
        elif message == '/who':
            await self.show_room_users(room)
        elif message.startswith('/telegram '):
            target_user = message.split()[1]
            await self.send_to_user_telegram(target_user)
        else:
            await room.broadcast(self, message)
```

**æˆæœç‰©**:
- ãƒãƒ«ãƒãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
- ãƒ«ãƒ¼ãƒ ä½œæˆ/å‚åŠ /é€€å‡º
- ãƒãƒ£ãƒƒãƒˆå†…ã‚³ãƒãƒ³ãƒ‰

#### ã‚¿ã‚¹ã‚¯3.3: ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ (40-50æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
async def file_main(self):
    """ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ãƒ¡ãƒ‹ãƒ¥ãƒ¼"""
    # ãƒ•ã‚¡ã‚¤ãƒ«æ²ç¤ºæ¿é¸æŠ
    file_boards = await self.file_board_service.get_file_boards()

    # ... æ²ç¤ºæ¿é¸æŠ ...

    while True:
        await self.send_line("\n=== File Board ===")
        await self.send_line("[L]ist  [U]pload  [D]ownload")
        await self.send_line("[I]nfo  [S]earch  [0] Exit")
        cmd = await self.receive_line()

        if cmd.upper() == 'L':
            await self.list_files(board_id)
        elif cmd.upper() == 'U':
            await self.upload_file(board_id)
        elif cmd.upper() == 'D':
            await self.download_file(board_id)
        # ...

async def upload_file(self, board_id: int):
    """ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆHTTPçµŒç”±ï¼‰"""
    upload_token = await self.file_service.generate_upload_token(
        user_id=self.user_id,
        board_id=board_id
    )

    upload_url = f"http://{self.server.host}:{self.server.http_port}/upload/{upload_token}"

    await self.send_line(f"\nUpload URL: {upload_url}")
    await self.send_line("Use your browser or curl to upload the file.")
    await self.send_line("Token expires in 10 minutes.")

    # ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™ã¾ã§å¾…æ©Ÿ
    await asyncio.sleep(600)
```

**æˆæœç‰©**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ²ç¤ºæ¿ç®¡ç†
- HTTPçµŒç”±ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€
- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯3.4: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ (35-40æ™‚é–“)

**å®Ÿè£…å†…å®¹**:
```python
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŸºåº•ã‚¯ãƒ©ã‚¹
class MTBBSPlugin:
    def __init__(self, server):
        self.server = server

    async def on_login(self, handler):
        """ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ãƒ•ãƒƒã‚¯"""
        pass

    async def on_logout(self, handler):
        """ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã®ãƒ•ãƒƒã‚¯"""
        pass

    async def on_message_post(self, handler, board_id, message):
        """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿æ™‚ã®ãƒ•ãƒƒã‚¯"""
        pass

    def register_command(self, command: str, handler):
        """ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ç™»éŒ²"""
        self.server.register_custom_command(command, handler)

# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
class PluginManager:
    def __init__(self, server):
        self.server = server
        self.plugins: Dict[str, MTBBSPlugin] = {}

    async def load_plugin(self, plugin_path: str):
        """ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ‰"""
        spec = importlib.util.spec_from_file_location("plugin", plugin_path)
        module = importlib.util.module_from_spec(spec)
        spec.loader.exec_module(module)

        plugin = module.Plugin(self.server)
        self.plugins[plugin_path] = plugin

        await plugin.on_load()

    async def trigger_event(self, event_name: str, *args, **kwargs):
        """ã‚¤ãƒ™ãƒ³ãƒˆãƒˆãƒªã‚¬ãƒ¼"""
        for plugin in self.plugins.values():
            handler = getattr(plugin, f"on_{event_name}", None)
            if handler:
                await handler(*args, **kwargs)
```

**æˆæœç‰©**:
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ç™»éŒ²

**ãƒ•ã‚§ãƒ¼ã‚º3å®Œäº†åŸºæº–**:
- âœ… Telegramç¨¼åƒ
- âœ… ãƒãƒ«ãƒãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ 
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ç¨¼åƒ
- âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 100-120æ™‚é–“

---

### 6.4 ãƒ•ã‚§ãƒ¼ã‚º4: å®Œå…¨äº’æ›æ€§é”æˆï¼ˆ2-3é€±é–“ï¼‰

**ç›®æ¨™**: æ®‹å­˜ã™ã‚‹å·®ç•°ã‚’è§£æ¶ˆã—ã€äº’æ›æ€§ã‚’æœ€å¤§åŒ–

#### ã‚¿ã‚¹ã‚¯4.1: æ®‹å­˜ã‚³ãƒãƒ³ãƒ‰å®Ÿè£… (15-20æ™‚é–“)

| ã‚³ãƒãƒ³ãƒ‰ | å·¥æ•° |
|---------|------|
| K (Killå‰Šé™¤) | 5-8æ™‚é–“ |
| L (Logè¡¨ç¤º) | 8-10æ™‚é–“ |
| S (Sysop Call) | 3-5æ™‚é–“ |
| X (IPè¡¨ç¤º) | 2-3æ™‚é–“ |
| P (Free Post) | 5-8æ™‚é–“ |

#### ã‚¿ã‚¹ã‚¯4.2: ç·åˆãƒ†ã‚¹ãƒˆ (10-15æ™‚é–“)

**ãƒ†ã‚¹ãƒˆé …ç›®**:
1. å…¨ã‚³ãƒãƒ³ãƒ‰å‹•ä½œç¢ºèª
2. æ¨©é™ç®¡ç†ã®æ¤œè¨¼
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å®‰å®šæ€§
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯4.3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ (5-8æ™‚é–“)

**æˆæœç‰©**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
- ç®¡ç†è€…ã‚¬ã‚¤ãƒ‰
- APIä»•æ§˜æ›¸
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã‚¬ã‚¤ãƒ‰

**ãƒ•ã‚§ãƒ¼ã‚º4å®Œäº†åŸºæº–**:
- âœ… å…¨26ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…å®Œäº†
- âœ… äº’æ›æ€§ã‚¹ã‚³ã‚¢90%ä»¥ä¸Š
- âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™
- âœ… æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†

**è¦‹ç©ã‚‚ã‚Šå·¥æ•°**: 30-40æ™‚é–“

---

### 6.5 ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚µãƒãƒªãƒ¼

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | å·¥æ•° | ä¸»è¦æˆæœç‰© | å®Œæˆåº¦ |
|---------|------|------|----------|--------|
| ãƒ•ã‚§ãƒ¼ã‚º1 | 3-4é€± | 60-80h | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€Whoæ‹¡å¼µ | 45% |
| ãƒ•ã‚§ãƒ¼ã‚º2 | 4-6é€± | 80-100h | ãƒ¡ãƒ¼ãƒ«ã€SYSOPã€Installã€ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | 70% |
| ãƒ•ã‚§ãƒ¼ã‚º3 | 6-8é€± | 100-120h | Telegramã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | 90% |
| ãƒ•ã‚§ãƒ¼ã‚º4 | 2-3é€± | 30-40h | æ®‹å­˜ã‚³ãƒãƒ³ãƒ‰ã€ãƒ†ã‚¹ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | 100% |
| **åˆè¨ˆ** | **15-21é€±** | **270-340h** | **å®Œå…¨äº’æ›BBSã‚·ã‚¹ãƒ†ãƒ ** | **100%** |

**ãƒªã‚½ãƒ¼ã‚¹å‰æ**:
- é–‹ç™ºè€…: 1-2å
- é€±é–“ä½œæ¥­æ™‚é–“: 20-30æ™‚é–“
- ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«: Pythonä¸­ç´šä»¥ä¸Šã€BBSçŸ¥è­˜ã‚ã‚Š

---

## ç¬¬7éƒ¨: ãƒªã‚¹ã‚¯ã¨ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

### 7.1 äº’æ›æ€§ãƒªã‚¹ã‚¯ã®è©•ä¾¡

#### ãƒªã‚¹ã‚¯1: ãƒ¦ãƒ¼ã‚¶ãƒ¼æœŸå¾…ã¨ã®ã‚®ãƒ£ãƒƒãƒ—ï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- ã‚ªãƒªã‚¸ãƒŠãƒ«MTBBSãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœªå®Ÿè£…æ©Ÿèƒ½ã«ä¾å­˜ã—ã¦ã„ã‚‹
- ç‰¹ã«ãƒ¡ãƒ¼ãƒ«ã€ãƒ•ã‚¡ã‚¤ãƒ«æ©Ÿèƒ½ã®æ¬ å¦‚ã¯è‡´å‘½çš„

**å½±éŸ¿**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼é›¢è„±
- ç§»è¡Œå¤±æ•—

**ç¢ºç‡**: 80%ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†æ™‚ç‚¹ã§ï¼‰

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **æ®µéšçš„ç§»è¡Œ**: ã‚ªãƒªã‚¸ãƒŠãƒ«ã¨Pythonç‰ˆã®ä¸¦è¡Œé‹ç”¨æœŸé–“ã‚’è¨­ã‘ã‚‹
2. **æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—å…¬é–‹**: å®Ÿè£…äºˆå®šã‚’æ˜ç¤ºã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼æœŸå¾…ã‚’ç®¡ç†
3. **å„ªå…ˆåº¦èª¿æ•´**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§æœ€é‡è¦æ©Ÿèƒ½ã‚’ç‰¹å®šã—å„ªå…ˆå®Ÿè£…

#### ãƒªã‚¹ã‚¯2: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œï¼ˆä¸­ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- Delphiç‰ˆã¯ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã€Pythonç‰ˆã¯asyncio
- å¤§é‡åŒæ™‚æ¥ç¶šæ™‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœªæ¤œè¨¼

**å½±éŸ¿**:
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä½ä¸‹
- æ¥ç¶šæ‹’å¦

**ç¢ºç‡**: 40%

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **è² è·ãƒ†ã‚¹ãƒˆå®Ÿæ–½**: ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†æ™‚ã«100åŒæ™‚æ¥ç¶šãƒ†ã‚¹ãƒˆ
2. **æ¥ç¶šåˆ¶é™è¨­å®š**: `TELNET_MAX_CONNECTIONS`ã®é©åˆ‡ãªè¨­å®š
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°ã¨ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®š

#### ãƒªã‚¹ã‚¯3: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®è¤‡é›‘æ€§ï¼ˆä¸­ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- Delphiç‰ˆã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ï¼ˆDAT/IDXï¼‰ã‹ã‚‰PostgreSQL/SQLiteã¸ã®ç§»è¡Œ
- æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆShift-JIS vs UTF-8ï¼‰

**å½±éŸ¿**:
- ãƒ‡ãƒ¼ã‚¿æå¤±
- æ–‡å­—åŒ–ã‘

**ç¢ºç‡**: 60%

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **ç§»è¡Œãƒ„ãƒ¼ãƒ«é–‹ç™º**: Delphiç‰ˆãƒ‡ãƒ¼ã‚¿èª­è¾¼â†’å¤‰æ›â†’Pythonç‰ˆDBæ›¸è¾¼
2. **ãƒ†ã‚¹ãƒˆç§»è¡Œ**: å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§äº‹å‰æ¤œè¨¼
3. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥**: ç§»è¡Œå‰ã®å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### 7.2 æŠ€è¡“çš„ãƒªã‚¹ã‚¯

#### ãƒªã‚¹ã‚¯4: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- Telnetãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯SSL/TLSæœªå¯¾å¿œï¼ˆå¹³æ–‡é€šä¿¡ï¼‰
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã€XSSç­‰ã®è„†å¼±æ€§

**å½±éŸ¿**:
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¼æ´©
- ãƒ‡ãƒ¼ã‚¿æ”¹ã–ã‚“
- ã‚·ã‚¹ãƒ†ãƒ ä¾µå®³

**ç¢ºç‡**: 50%ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–æœªå®Ÿæ–½ã®å ´åˆï¼‰

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **TLSå¯¾å¿œ**: Telnetã§ã¯ãªãSSH/TLS Telnetä½¿ç”¨
   ```python
   # SSL/TLS wrapper
   import ssl
   context = ssl.create_default_context(ssl.Purpose.CLIENT_AUTH)
   context.load_cert_chain('cert.pem', 'key.pem')

   async def handle_client_ssl(reader, writer):
       # SSL/TLSã§ãƒ©ãƒƒãƒ—
   ```
2. **å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»**: ç¬¬ä¸‰è€…ã«ã‚ˆã‚‹ãƒšãƒãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

#### ãƒªã‚¹ã‚¯5: ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å•é¡Œï¼ˆä½ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- Pythonä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸æ•´åˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¯¾å¿œ

**å½±éŸ¿**:
- å‹•ä½œä¸å®‰å®š
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§

**ç¢ºç‡**: 20%

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **ä¾å­˜ç®¡ç†**: `poetry`ã¾ãŸã¯`pipenv`ã§å³å¯†ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
2. **å®šæœŸã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ**: æœˆæ¬¡ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç¢ºèª
3. **CI/CD**: è‡ªå‹•ãƒ†ã‚¹ãƒˆã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã®å½±éŸ¿ã‚’æ¤œå‡º

#### ãƒªã‚¹ã‚¯6: ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£é™ç•Œï¼ˆä½ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- asyncioã®åŒæ™‚æ¥ç¶šæ•°é™ç•Œï¼ˆç†è«–ä¸Šæ•°åƒã€å®Ÿç”¨ä¸Šæ•°ç™¾ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ—ãƒ¼ãƒ«æ¯æ¸‡

**å½±éŸ¿**:
- æ¥ç¶šæ‹’å¦
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹

**ç¢ºç‡**: 10%ï¼ˆå°è¦æ¨¡BBSã®å ´åˆï¼‰

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **æ¥ç¶šåˆ¶é™**: é©åˆ‡ãª`MAX_CONNECTIONS`è¨­å®š
2. **ãƒ—ãƒ¼ãƒ«ç®¡ç†**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ—ãƒ¼ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–
3. **æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹+ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µï¼ˆå°†æ¥ï¼‰

### 7.3 é‹ç”¨ãƒªã‚¹ã‚¯

#### ãƒªã‚¹ã‚¯7: é‹ç”¨è€…ã‚¹ã‚­ãƒ«ä¸è¶³ï¼ˆä¸­ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- SYSOPï¼ˆç®¡ç†è€…ï¼‰ãŒPython/Linuxç’°å¢ƒã«ä¸æ…£ã‚Œ
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°èƒ½åŠ›ä¸è¶³

**å½±éŸ¿**:
- éšœå®³å¯¾å¿œé…å»¶
- ã‚·ã‚¹ãƒ†ãƒ åœæ­¢

**ç¢ºç‡**: 40%

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **ç®¡ç†è€…ç ”ä¿®**: Python/LinuxåŸºç¤ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°
2. **é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ•´å‚™**: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
3. **ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ **: è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆ+ãƒ­ã‚°åé›†

#### ãƒªã‚¹ã‚¯8: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥ä¸å‚™ï¼ˆé«˜ãƒªã‚¹ã‚¯ï¼‰

**å•é¡Œ**:
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æœªå®Ÿæ–½ã¾ãŸã¯ä¸ååˆ†
- ãƒªã‚¹ãƒˆã‚¢æ‰‹é †æœªç¢ºç«‹

**å½±éŸ¿**:
- ãƒ‡ãƒ¼ã‚¿æå¤±
- ã‚µãƒ¼ãƒ“ã‚¹å¾©æ—§ä¸èƒ½

**ç¢ºç‡**: 60%ï¼ˆå¯¾ç­–ãªã—ã®å ´åˆï¼‰

**ãƒŸãƒ†ã‚£ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç­–**:
1. **è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
   ```bash
   # crontab
   0 2 * * * pg_dump mtbbs > /backup/mtbbs_$(date +\%Y\%m\%d).sql
   ```
2. **ãƒªã‚¹ãƒˆã‚¢è¨“ç·´**: æœˆæ¬¡ã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®ãƒªã‚¹ãƒˆã‚¢å®Ÿæ–½
3. **ã‚ªãƒ•ã‚µã‚¤ãƒˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®è¤‡è£½

### 7.4 ãƒªã‚¹ã‚¯ãƒãƒˆãƒªã‚¯ã‚¹

| ãƒªã‚¹ã‚¯ | ç¢ºç‡ | å½±éŸ¿ | ãƒªã‚¹ã‚¯å€¤ | å„ªå…ˆåº¦ |
|-------|------|------|---------|--------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æœŸå¾…ã‚®ãƒ£ãƒƒãƒ— | é«˜ (80%) | é«˜ | **6.4** | æœ€å„ªå…ˆ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ | ä¸­ (50%) | é«˜ | **5.0** | æœ€å„ªå…ˆ |
| ãƒ‡ãƒ¼ã‚¿ç§»è¡Œè¤‡é›‘æ€§ | ä¸­ (60%) | ä¸­ | **3.6** | é«˜ |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸å‚™ | é«˜ (60%) | ä¸­ | **3.6** | é«˜ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ | ä¸­ (40%) | ä¸­ | **2.4** | ä¸­ |
| é‹ç”¨è€…ã‚¹ã‚­ãƒ«ä¸è¶³ | ä¸­ (40%) | ä¸­ | **2.4** | ä¸­ |
| ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå•é¡Œ | ä½ (20%) | ä¸­ | **1.2** | ä½ |
| ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£é™ç•Œ | ä½ (10%) | ä½ | **0.1** | æœ€ä½ |

**ãƒªã‚¹ã‚¯å€¤è¨ˆç®—**: ç¢ºç‡(%) Ã— å½±éŸ¿åº¦(1-5) / 10

---

## ç¬¬8éƒ¨: æ¨å¥¨äº‹é …

### 8.1 å„ªå…ˆé †ä½ä»˜ã‘ã•ã‚ŒãŸå®Ÿè£…æ¨å¥¨

#### å³æ™‚å¯¾å¿œï¼ˆãƒ•ã‚§ãƒ¼ã‚º1é–‹å§‹å‰ï¼‰

1. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–**:
   - [ ] ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥æ¤œè¨¼ï¼ˆbcryptå®Ÿè£…æ¸ˆã¿ã‹ç¢ºèªï¼‰
   - [ ] å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
   - [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¿½åŠ ï¼ˆãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼‰

   ```python
   from functools import wraps
   import time

   def rate_limit(max_calls: int, period: int):
       """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿"""
       calls = []

       def decorator(func):
           @wraps(func)
           async def wrapper(*args, **kwargs):
               now = time.time()
               calls[:] = [c for c in calls if c > now - period]

               if len(calls) >= max_calls:
                   raise Exception("Rate limit exceeded")

               calls.append(now)
               return await func(*args, **kwargs)
           return wrapper
       return decorator

   # ä½¿ç”¨ä¾‹
   @rate_limit(max_calls=3, period=60)
   async def login(self):
       # ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
   ```

2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–**:
   ```bash
   #!/bin/bash
   # daily_backup.sh

   BACKUP_DIR="/backup/mtbbs"
   DATE=$(date +%Y%m%d_%H%M%S)

   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
   sqlite3 data/mtbbs.db ".backup '$BACKUP_DIR/mtbbs_$DATE.db'"

   # 7æ—¥ä»¥ä¸Šå‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤
   find $BACKUP_DIR -name "mtbbs_*.db" -mtime +7 -delete

   # crontabã«ç™»éŒ²
   # 0 2 * * * /path/to/daily_backup.sh
   ```

3. **ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰**:
   ```python
   # monitoring.py
   import logging
   from datetime import datetime

   class SystemMonitor:
       def __init__(self):
           self.logger = logging.getLogger('mtbbs.monitor')

       async def check_health(self):
           """ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯"""
           checks = {
               'database': await self.check_database(),
               'sessions': await self.check_sessions(),
               'disk_space': await self.check_disk_space()
           }

           if not all(checks.values()):
               await self.send_alert(checks)

           return checks
   ```

#### çŸ­æœŸå¯¾å¿œï¼ˆãƒ•ã‚§ãƒ¼ã‚º1-2ï¼‰

1. **æ©Ÿèƒ½å®Œæˆåº¦å‘ä¸Š**:
   - ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ï¼ˆæœ€å„ªå…ˆï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²å®Ÿè£…
   - SYSOPæ©Ÿèƒ½å®Ÿè£…

2. **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æ”¹å–„**:
   - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å……å®ŸåŒ–
   - ãƒ˜ãƒ«ãƒ—ã‚·ã‚¹ãƒ†ãƒ ã®æ‹¡å……
   - ã‚³ãƒãƒ³ãƒ‰è£œå®Œæ©Ÿèƒ½ï¼ˆTabè£œå®Œï¼‰

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**:
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
   - ã‚¯ã‚¨ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
   - éåŒæœŸå‡¦ç†ã®æœ€å¤§æ´»ç”¨

#### ä¸­é•·æœŸå¯¾å¿œï¼ˆãƒ•ã‚§ãƒ¼ã‚º3-4ï¼‰

1. **ãƒ¢ãƒ€ãƒ³åŒ–**:
   - WebUIã®æä¾›ï¼ˆReact/Vueï¼‰
   - REST APIå…¬é–‹
   - ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå¯¾å¿œ

2. **æ‹¡å¼µæ€§å‘ä¸Š**:
   - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ
   - APIèªè¨¼ï¼ˆOAuth2ï¼‰
   - Webhookã‚µãƒãƒ¼ãƒˆ

3. **é‹ç”¨è‡ªå‹•åŒ–**:
   - CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
   - è‡ªå‹•ãƒ†ã‚¹ãƒˆæ‹¡å……
   - ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–

### 8.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„ææ¡ˆ

#### ææ¡ˆ1: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ï¼ˆå°†æ¥å±•æœ›ï¼‰

**ç¾åœ¨ã®ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯æ§‹é€ **:
```
TelnetServer
  â”œâ”€ TelnetHandler (å…¨æ©Ÿèƒ½)
  â”œâ”€ Services (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯)
  â””â”€ Database
```

**ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–å¾Œ**:
```
APIGateway
  â”œâ”€ AuthService (èªè¨¼)
  â”œâ”€ MessageService (æ²ç¤ºæ¿)
  â”œâ”€ MailService (ãƒ¡ãƒ¼ãƒ«)
  â”œâ”€ FileService (ãƒ•ã‚¡ã‚¤ãƒ«)
  â””â”€ NotificationService (é›»å ±/é€šçŸ¥)

Clients
  â”œâ”€ TelnetClient
  â”œâ”€ WebClient
  â””â”€ MobileClient
```

**åˆ©ç‚¹**:
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
- ç‹¬ç«‹ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤
- æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯é¸æŠã®è‡ªç”±

**å®Ÿè£…æ™‚æœŸ**: ãƒ•ã‚§ãƒ¼ã‚º4å®Œäº†å¾Œï¼ˆ1-2å¹´å¾Œï¼‰

#### ææ¡ˆ2: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**ç¾åœ¨**:
```python
# ç›´æ¥å‘¼ã³å‡ºã—
async def post_message(self, board_id, message):
    await self.board_service.create_message(...)
    # é€šçŸ¥ãªã—
```

**ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•**:
```python
# ã‚¤ãƒ™ãƒ³ãƒˆãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥
async def post_message(self, board_id, message):
    await self.board_service.create_message(...)

    # ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
    await self.event_bus.publish('message.posted', {
        'board_id': board_id,
        'message_id': message.id,
        'user_id': self.user_id
    })

# ã‚¤ãƒ™ãƒ³ãƒˆã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼
@event_bus.subscribe('message.posted')
async def on_message_posted(event):
    # é€šçŸ¥é€ä¿¡
    await send_notifications(event['board_id'])

    # ãƒ­ã‚°è¨˜éŒ²
    await log_activity(event)

    # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ•ãƒƒã‚¯
    await trigger_plugins('on_message_post', event)
```

**åˆ©ç‚¹**:
- ç–çµåˆ
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çµ±åˆå®¹æ˜“
- ç›£æŸ»ãƒ­ã‚°è‡ªå‹•åŒ–

**å®Ÿè£…æ™‚æœŸ**: ãƒ•ã‚§ãƒ¼ã‚º3é–‹å§‹æ™‚

#### ææ¡ˆ3: ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥

**å¯¾è±¡**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆé »ç¹ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
2. æ²ç¤ºæ¿ãƒªã‚¹ãƒˆï¼ˆå¤‰æ›´é »åº¦ä½ï¼‰
3. ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆé™çš„ï¼‰

**å®Ÿè£…**:
```python
from functools import lru_cache
import asyncio

class CachedUserService:
    def __init__(self, user_service):
        self.service = user_service
        self.cache = {}
        self.cache_ttl = 300  # 5åˆ†

    async def get_user(self, user_id: str):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ããƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—"""
        if user_id in self.cache:
            cached_user, timestamp = self.cache[user_id]
            if time.time() - timestamp < self.cache_ttl:
                return cached_user

        user = await self.service.get_user(user_id)
        self.cache[user_id] = (user, time.time())
        return user

    def invalidate(self, user_id: str):
        """ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–"""
        self.cache.pop(user_id, None)
```

**æœŸå¾…åŠ¹æœ**:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªå‰Šæ¸› 30-50%
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“æ”¹å–„ 20-40%

**å®Ÿè£…æ™‚æœŸ**: ãƒ•ã‚§ãƒ¼ã‚º2

### 8.3 ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

1. **å‹ãƒ’ãƒ³ãƒˆå¿…é ˆ**:
   ```python
   async def create_message(
       self,
       board_id: int,
       user_id: str,
       title: str,
       body: str
   ) -> Message:
       """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ"""
   ```

2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**:
   ```python
   async def send_mail(self, from_id: str, to_id: str, title: str, body: str) -> Mail:
       """
       ãƒ¡ãƒ¼ãƒ«é€ä¿¡

       Args:
           from_id: é€ä¿¡è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
           to_id: å—ä¿¡è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
           title: ãƒ¡ãƒ¼ãƒ«ã‚¿ã‚¤ãƒˆãƒ« (æœ€å¤§100æ–‡å­—)
           body: ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡

       Returns:
           ä½œæˆã•ã‚ŒãŸMailã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

       Raises:
           UserNotFoundException: é€ä¿¡è€…ã¾ãŸã¯å—ä¿¡è€…ãŒå­˜åœ¨ã—ãªã„å ´åˆ
           ValidationError: ã‚¿ã‚¤ãƒˆãƒ«ã¾ãŸã¯æœ¬æ–‡ãŒç„¡åŠ¹ãªå ´åˆ
       """
   ```

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
   ```python
   try:
       user = await self.user_service.get_user(user_id)
   except UserNotFoundException:
       await self.send_line("User not found.")
       return
   except DatabaseError as e:
       logger.error(f"Database error: {e}")
       await self.send_line("System error. Please try again later.")
       return
   ```

#### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

1. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: å…¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: TelnetHandlerã®ä¸»è¦ã‚³ãƒãƒ³ãƒ‰
3. **E2Eãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªï¼ˆç™»éŒ²â†’æŠ•ç¨¿â†’èª­è¾¼ï¼‰
4. **è² è·ãƒ†ã‚¹ãƒˆ**: 100åŒæ™‚æ¥ç¶šã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

```python
# tests/test_mail_service.py
import pytest

@pytest.mark.asyncio
async def test_send_mail():
    """ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ"""
    mail = await mail_service.send_mail(
        from_id='user1',
        to_id='user2',
        title='Test',
        body='Test body'
    )

    assert mail.from_id == 'user1'
    assert mail.to_id == 'user2'
    assert mail.status == 'unread'
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

1. **ç’°å¢ƒåˆ†é›¢**: dev / staging / production
2. **è¨­å®šç®¡ç†**: ç’°å¢ƒå¤‰æ•° + .envãƒ•ã‚¡ã‚¤ãƒ«
3. **ãƒ­ã‚°ç®¡ç†**: æ§‹é€ åŒ–ãƒ­ã‚° + ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
4. **ç›£è¦–**: Prometheus + Grafana

---

## çµè«–

### ç¾çŠ¶è©•ä¾¡

MTBBS Linux (Pythonå®Ÿè£…) ã¯ã€ã‚ªãƒªã‚¸ãƒŠãƒ«MTBBS 3.02ã®**ç´„31%**ã®ã‚³ãƒãƒ³ãƒ‰äº’æ›æ€§ã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ãªæ²ç¤ºæ¿æ©Ÿèƒ½ï¼ˆèª­ã¿æ›¸ãã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ãƒãƒ£ãƒƒãƒˆï¼‰ã¯å®Ÿè£…æ¸ˆã¿ã§ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“é€šä¿¡ï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰ã€ç®¡ç†æ©Ÿèƒ½ï¼ˆSYSOPï¼‰ã€æ‹¡å¼µæ©Ÿèƒ½ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼‰ãŒæ¬ å¦‚ã—ã¦ã„ã¾ã™ã€‚

### å®Œå…¨äº’æ›æ€§ã¸ã®é“ã®ã‚Š

æœ¬ãƒ¬ãƒãƒ¼ãƒˆã§æç¤ºã—ãŸ**4ãƒ•ã‚§ãƒ¼ã‚ºã€270-340æ™‚é–“**ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã«å¾“ã†ã“ã¨ã§ã€å®Œå…¨äº’æ›æ€§ã‚’é”æˆã§ãã¾ã™ã€‚ç‰¹ã«**ãƒ•ã‚§ãƒ¼ã‚º1-2**ï¼ˆãƒ¡ãƒ¼ãƒ«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€SYSOPæ©Ÿèƒ½ï¼‰ã®å®Ÿè£…ãŒæœ€å„ªå…ˆã§ã™ã€‚

### æœ€çµ‚æ¨å¥¨äº‹é …

1. **å³æ™‚å®Ÿæ–½**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–
2. **çŸ­æœŸç›®æ¨™**: ãƒ¡ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã®å®Ÿè£…ï¼ˆãƒ•ã‚§ãƒ¼ã‚º1-2ï¼‰
3. **ä¸­æœŸç›®æ¨™**: å…¨æ©Ÿèƒ½ã®å®Œæˆã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒ•ã‚§ãƒ¼ã‚º3-4ï¼‰
4. **é•·æœŸãƒ“ã‚¸ãƒ§ãƒ³**: ãƒ¢ãƒ€ãƒ³åŒ–ã¨ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–

MTBBS Linuxã¯ã€å¤å…¸çš„ãªBBSã‚·ã‚¹ãƒ†ãƒ ã®è‰¯ã•ã‚’ä¿ã¡ãªãŒã‚‰ã€ãƒ¢ãƒ€ãƒ³ãªPython/asyncioã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§å®Ÿè£…ã•ã‚ŒãŸæœ‰æœ›ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚æœ¬ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã«å¾“ã„ã€æ®µéšçš„ã«æ©Ÿèƒ½ã‚’æ‹¡å……ã™ã‚‹ã“ã¨ã§ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚’è¶…ãˆã‚‹æ¬¡ä¸–ä»£BBSã‚·ã‚¹ãƒ†ãƒ ã¸ã¨é€²åŒ–ã§ãã‚‹ã§ã—ã‚‡ã†ã€‚

---

**ãƒ¬ãƒãƒ¼ãƒˆä½œæˆè€…**: Claude Code
**ä½œæˆæ—¥**: 2025å¹´12æœˆ25æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
